var __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

SPACE.Spaceship = (function(_super) {
  __extends(Spaceship, _super);

  Spaceship.prototype.state = null;

  Spaceship.IDLE = 'IDLE';

  Spaceship.LAUNCHED = 'LAUNCHED';

  Spaceship.IN_LOOP = 'IN_LOOP';

  Spaceship.ARRIVED = 'ARRIVED';

  function Spaceship(target, radius) {
    Spaceship.__super__.constructor.apply(this, arguments);
    this.target = target;
    this.radius = radius;
    this.angle = Math.random() * Math.PI * 2;
    this.setState(SPACE.Spaceship.IDLE);
    this.generate();
  }

  Spaceship.prototype.computePosition = function(point, angle, length) {
    var x, y;
    x = point.x + Math.sin(angle) * length;
    y = point.y + Math.cos(angle) * length;
    return new THREE.Vector3(x, y, point.z);
  };

  Spaceship.prototype.generate = function() {
    var g, m, matrix, ship, spline;
    g = new THREE.Geometry();
    g.vertices.push(new THREE.Vector3(0, -52.5, -10), new THREE.Vector3(-10, -67.5, 10), new THREE.Vector3(-50, -42.5, 10), new THREE.Vector3(0, 67.5, 10), new THREE.Vector3(+50, -42.5, 10), new THREE.Vector3(+10, -67.5, 10));
    g.faces.push(new THREE.Face3(0, 3, 1), new THREE.Face3(1, 2, 3), new THREE.Face3(3, 0, 5), new THREE.Face3(5, 4, 3));
    g.computeFaceNormals();
    m = new THREE.MeshLambertMaterial({
      color: 0x0088ff,
      side: THREE.DoubleSide
    });
    ship = new THREE.Mesh(g, m);
    matrix = new THREE.Matrix4();
    matrix.makeRotationX(Math.PI * .5);
    ship.geometry.applyMatrix(matrix);
    matrix.makeRotationZ(Math.PI);
    ship.geometry.applyMatrix(matrix);
    ship.castShadow = true;
    ship.receiveShadow = true;
    this.add(ship);
    
    THREE.Curves = {};


     THREE.Curves.GrannyKnot = THREE.Curve.create( function(){},

       function(t) {
          t = 2 * Math.PI * t;

          var x = -0.22 * Math.cos(t) - 1.28 * Math.sin(t) - 0.44 * Math.cos(3 * t) - 0.78 * Math.sin(3 * t);
          var y = -0.1 * Math.cos(2 * t) - 0.27 * Math.sin(2 * t) + 0.38 * Math.cos(4 * t) + 0.46 * Math.sin(4 * t);
          var z = 0.7 * Math.cos(3 * t) - 0.4 * Math.sin(3 * t);
          return new THREE.Vector3(x, y, z).multiplyScalar(20);
      }
    );
    ;
    spline = new THREE.Curves.GrannyKnot();
    g = new THREE.TubeGeometry(spline, 200, .25, 10, true);
    ship.scale.set(.5, .5, .5);
    return ship.update = (function(_this) {
      return function() {
        var looptime, pos, t, time;
        time = Date.now();
        looptime = 20 * 1000;
        t = (time % looptime) / looptime;
        pos = g.parameters.path.getPointAt(t);
        pos.multiplyScalar(10);
        ship.position.set(pos.x, pos.y, pos.z);
        pos.multiplyScalar(2);
        pos = g.parameters.path.getPointAt((t + 10 / g.parameters.path.getLength()) % 1).multiplyScalar(10);
        return ship.lookAt(pos);
      };
    })(this);
  };

  Spaceship.prototype.setState = function(state) {
    this.state = state;
    switch (state) {
      case SPACE.Spaceship.IDLE:
        return SPACE.LOG('IDLE');
      case SPACE.Spaceship.LAUNCHED:
        return SPACE.LOG('LAUNCHED');
      case SPACE.Spaceship.IN_LOOP:
        return SPACE.LOG('IN_LOOP');
      case SPACE.Spaceship.ARRIVED:
        return SPACE.LOG('ARRIVED');
      default:
        return this.setState(SPACE.Spaceship.IDLE);
    }
  };

  Spaceship.prototype.forward = function() {};

  Spaceship.prototype.backward = function() {};

  Spaceship.prototype.move = function() {};

  Spaceship.prototype.update = function() {};

  Spaceship.prototype._updateInLoop = function() {};

  Spaceship.prototype._updateInLaunched = function() {};

  return Spaceship;

})(THREE.Group);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRocmVlanMvZ3JhcGhpY3MvU3BhY2VzaGlwLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBO2lTQUFBOztBQUFBLEtBQVcsQ0FBQztBQUVWLDhCQUFBLENBQUE7O0FBQUEsc0JBQUEsS0FBQSxHQUFPLElBQVAsQ0FBQTs7QUFBQSxFQUdBLFNBQUMsQ0FBQSxJQUFELEdBQVcsTUFIWCxDQUFBOztBQUFBLEVBSUEsU0FBQyxDQUFBLFFBQUQsR0FBVyxVQUpYLENBQUE7O0FBQUEsRUFLQSxTQUFDLENBQUEsT0FBRCxHQUFXLFNBTFgsQ0FBQTs7QUFBQSxFQU1BLFNBQUMsQ0FBQSxPQUFELEdBQVcsU0FOWCxDQUFBOztBQVFhLEVBQUEsbUJBQUMsTUFBRCxFQUFTLE1BQVQsR0FBQTtBQUNYLElBQUEsNENBQUEsU0FBQSxDQUFBLENBQUE7QUFBQSxJQUVBLElBQUMsQ0FBQSxNQUFELEdBQVUsTUFGVixDQUFBO0FBQUEsSUFHQSxJQUFDLENBQUEsTUFBRCxHQUFVLE1BSFYsQ0FBQTtBQUFBLElBSUEsSUFBQyxDQUFBLEtBQUQsR0FBVSxJQUFJLENBQUMsTUFBTCxDQUFBLENBQUEsR0FBZ0IsSUFBSSxDQUFDLEVBQXJCLEdBQTBCLENBSnBDLENBQUE7QUFBQSxJQU1BLElBQUMsQ0FBQSxRQUFELENBQVUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUExQixDQU5BLENBQUE7QUFBQSxJQVFBLElBQUMsQ0FBQSxRQUFELENBQUEsQ0FSQSxDQURXO0VBQUEsQ0FSYjs7QUFBQSxzQkFtQkEsZUFBQSxHQUFpQixTQUFDLEtBQUQsRUFBUSxLQUFSLEVBQWUsTUFBZixHQUFBO0FBQ2YsUUFBQSxJQUFBO0FBQUEsSUFBQSxDQUFBLEdBQUksS0FBSyxDQUFDLENBQU4sR0FBVSxJQUFJLENBQUMsR0FBTCxDQUFTLEtBQVQsQ0FBQSxHQUFrQixNQUFoQyxDQUFBO0FBQUEsSUFDQSxDQUFBLEdBQUksS0FBSyxDQUFDLENBQU4sR0FBVSxJQUFJLENBQUMsR0FBTCxDQUFTLEtBQVQsQ0FBQSxHQUFrQixNQURoQyxDQUFBO0FBRUEsV0FBVyxJQUFBLEtBQUssQ0FBQyxPQUFOLENBQWMsQ0FBZCxFQUFpQixDQUFqQixFQUFvQixLQUFLLENBQUMsQ0FBMUIsQ0FBWCxDQUhlO0VBQUEsQ0FuQmpCLENBQUE7O0FBQUEsc0JBd0JBLFFBQUEsR0FBVSxTQUFBLEdBQUE7QUFHUixRQUFBLDBCQUFBO0FBQUEsSUFBQSxDQUFBLEdBQVEsSUFBQSxLQUFLLENBQUMsUUFBTixDQUFBLENBQVIsQ0FBQTtBQUFBLElBQ0EsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFYLENBQ00sSUFBQSxLQUFLLENBQUMsT0FBTixDQUFnQixDQUFoQixFQUFtQixDQUFBLElBQW5CLEVBQTBCLENBQUEsRUFBMUIsQ0FETixFQUVNLElBQUEsS0FBSyxDQUFDLE9BQU4sQ0FBYyxDQUFBLEVBQWQsRUFBbUIsQ0FBQSxJQUFuQixFQUEyQixFQUEzQixDQUZOLEVBR00sSUFBQSxLQUFLLENBQUMsT0FBTixDQUFjLENBQUEsRUFBZCxFQUFtQixDQUFBLElBQW5CLEVBQTJCLEVBQTNCLENBSE4sRUFJTSxJQUFBLEtBQUssQ0FBQyxPQUFOLENBQWdCLENBQWhCLEVBQW9CLElBQXBCLEVBQTJCLEVBQTNCLENBSk4sRUFLTSxJQUFBLEtBQUssQ0FBQyxPQUFOLENBQWMsQ0FBQSxFQUFkLEVBQW1CLENBQUEsSUFBbkIsRUFBMkIsRUFBM0IsQ0FMTixFQU1NLElBQUEsS0FBSyxDQUFDLE9BQU4sQ0FBYyxDQUFBLEVBQWQsRUFBbUIsQ0FBQSxJQUFuQixFQUEyQixFQUEzQixDQU5OLENBREEsQ0FBQTtBQUFBLElBU0EsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFSLENBQ00sSUFBQSxLQUFLLENBQUMsS0FBTixDQUFZLENBQVosRUFBZSxDQUFmLEVBQWtCLENBQWxCLENBRE4sRUFFTSxJQUFBLEtBQUssQ0FBQyxLQUFOLENBQVksQ0FBWixFQUFlLENBQWYsRUFBa0IsQ0FBbEIsQ0FGTixFQUdNLElBQUEsS0FBSyxDQUFDLEtBQU4sQ0FBWSxDQUFaLEVBQWUsQ0FBZixFQUFrQixDQUFsQixDQUhOLEVBSU0sSUFBQSxLQUFLLENBQUMsS0FBTixDQUFZLENBQVosRUFBZSxDQUFmLEVBQWtCLENBQWxCLENBSk4sQ0FUQSxDQUFBO0FBQUEsSUFlQSxDQUFDLENBQUMsa0JBQUYsQ0FBQSxDQWZBLENBQUE7QUFBQSxJQWlCQSxDQUFBLEdBQVEsSUFBQSxLQUFLLENBQUMsbUJBQU4sQ0FBMEI7QUFBQSxNQUFFLEtBQUEsRUFBTyxRQUFUO0FBQUEsTUFBbUIsSUFBQSxFQUFNLEtBQUssQ0FBQyxVQUEvQjtLQUExQixDQWpCUixDQUFBO0FBQUEsSUFtQkEsSUFBQSxHQUFXLElBQUEsS0FBSyxDQUFDLElBQU4sQ0FBVyxDQUFYLEVBQWMsQ0FBZCxDQW5CWCxDQUFBO0FBQUEsSUFvQkEsTUFBQSxHQUFhLElBQUEsS0FBSyxDQUFDLE9BQU4sQ0FBQSxDQXBCYixDQUFBO0FBQUEsSUFxQkEsTUFBTSxDQUFDLGFBQVAsQ0FBcUIsSUFBSSxDQUFDLEVBQUwsR0FBUSxFQUE3QixDQXJCQSxDQUFBO0FBQUEsSUFzQkEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFkLENBQTBCLE1BQTFCLENBdEJBLENBQUE7QUFBQSxJQXVCQSxNQUFNLENBQUMsYUFBUCxDQUFxQixJQUFJLENBQUMsRUFBMUIsQ0F2QkEsQ0FBQTtBQUFBLElBd0JBLElBQUksQ0FBQyxRQUFRLENBQUMsV0FBZCxDQUEwQixNQUExQixDQXhCQSxDQUFBO0FBQUEsSUF5QkEsSUFBSSxDQUFDLFVBQUwsR0FBa0IsSUF6QmxCLENBQUE7QUFBQSxJQTBCQSxJQUFJLENBQUMsYUFBTCxHQUFxQixJQTFCckIsQ0FBQTtBQUFBLElBMkJBLElBQUMsQ0FBQSxHQUFELENBQUssSUFBTCxDQTNCQSxDQUFBO0FBQUEsSUE4QkE7Ozs7Ozs7Ozs7Ozs7OztJQTlCQSxDQUFBO0FBQUEsSUE4Q0EsTUFBQSxHQUFhLElBQUEsS0FBSyxDQUFDLE1BQU0sQ0FBQyxVQUFiLENBQUEsQ0E5Q2IsQ0FBQTtBQUFBLElBK0NBLENBQUEsR0FBUSxJQUFBLEtBQUssQ0FBQyxZQUFOLENBQW1CLE1BQW5CLEVBQTJCLEdBQTNCLEVBQWdDLEdBQWhDLEVBQXFDLEVBQXJDLEVBQXlDLElBQXpDLENBL0NSLENBQUE7QUFBQSxJQThEQSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQVgsQ0FBZSxFQUFmLEVBQW1CLEVBQW5CLEVBQXVCLEVBQXZCLENBOURBLENBQUE7V0FnRUEsSUFBSSxDQUFDLE1BQUwsR0FBYyxDQUFBLFNBQUEsS0FBQSxHQUFBO2FBQUEsU0FBQSxHQUFBO0FBQ1osWUFBQSxzQkFBQTtBQUFBLFFBQUEsSUFBQSxHQUFPLElBQUksQ0FBQyxHQUFMLENBQUEsQ0FBUCxDQUFBO0FBQUEsUUFDQSxRQUFBLEdBQVcsRUFBQSxHQUFLLElBRGhCLENBQUE7QUFBQSxRQUVBLENBQUEsR0FBSSxDQUFFLElBQUEsR0FBTyxRQUFULENBQUEsR0FBc0IsUUFGMUIsQ0FBQTtBQUFBLFFBSUEsR0FBQSxHQUFNLENBQUMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQWxCLENBQThCLENBQTlCLENBSk4sQ0FBQTtBQUFBLFFBS0EsR0FBRyxDQUFDLGNBQUosQ0FBb0IsRUFBcEIsQ0FMQSxDQUFBO0FBQUEsUUFNQSxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQWQsQ0FBa0IsR0FBRyxDQUFDLENBQXRCLEVBQXlCLEdBQUcsQ0FBQyxDQUE3QixFQUFnQyxHQUFHLENBQUMsQ0FBcEMsQ0FOQSxDQUFBO0FBQUEsUUFPQSxHQUFHLENBQUMsY0FBSixDQUFvQixDQUFwQixDQVBBLENBQUE7QUFBQSxRQVNBLEdBQUEsR0FBTSxDQUFDLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFsQixDQUE4QixDQUFFLENBQUEsR0FBSSxFQUFBLEdBQUssQ0FBQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsU0FBbEIsQ0FBQSxDQUFYLENBQUEsR0FBNkMsQ0FBM0UsQ0FBOEUsQ0FBQyxjQUEvRSxDQUErRixFQUEvRixDQVROLENBQUE7ZUFVQSxJQUFJLENBQUMsTUFBTCxDQUFZLEdBQVosRUFYWTtNQUFBLEVBQUE7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLEVBbkVOO0VBQUEsQ0F4QlYsQ0FBQTs7QUFBQSxzQkFnS0EsUUFBQSxHQUFVLFNBQUMsS0FBRCxHQUFBO0FBQ1IsSUFBQSxJQUFDLENBQUEsS0FBRCxHQUFTLEtBQVQsQ0FBQTtBQUNBLFlBQU8sS0FBUDtBQUFBLFdBQ08sS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUR2QjtlQUVJLEtBQUssQ0FBQyxHQUFOLENBQVUsTUFBVixFQUZKO0FBQUEsV0FHTyxLQUFLLENBQUMsU0FBUyxDQUFDLFFBSHZCO2VBSUksS0FBSyxDQUFDLEdBQU4sQ0FBVSxVQUFWLEVBSko7QUFBQSxXQUtPLEtBQUssQ0FBQyxTQUFTLENBQUMsT0FMdkI7ZUFNSSxLQUFLLENBQUMsR0FBTixDQUFVLFNBQVYsRUFOSjtBQUFBLFdBT08sS0FBSyxDQUFDLFNBQVMsQ0FBQyxPQVB2QjtlQVFJLEtBQUssQ0FBQyxHQUFOLENBQVUsU0FBVixFQVJKO0FBQUE7ZUFVSSxJQUFDLENBQUEsUUFBRCxDQUFVLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBMUIsRUFWSjtBQUFBLEtBRlE7RUFBQSxDQWhLVixDQUFBOztBQUFBLHNCQThLQSxPQUFBLEdBQVMsU0FBQSxHQUFBLENBOUtULENBQUE7O0FBQUEsc0JBZ0xBLFFBQUEsR0FBVSxTQUFBLEdBQUEsQ0FoTFYsQ0FBQTs7QUFBQSxzQkFrTEEsSUFBQSxHQUFNLFNBQUEsR0FBQSxDQWxMTixDQUFBOztBQUFBLHNCQW9MQSxNQUFBLEdBQVEsU0FBQSxHQUFBLENBcExSLENBQUE7O0FBQUEsc0JBc0xBLGFBQUEsR0FBZSxTQUFBLEdBQUEsQ0F0TGYsQ0FBQTs7QUFBQSxzQkF3TEEsaUJBQUEsR0FBbUIsU0FBQSxHQUFBLENBeExuQixDQUFBOzttQkFBQTs7R0FGNEIsS0FBSyxDQUFDLE1BQXBDLENBQUEiLCJmaWxlIjoidGhyZWVqcy9ncmFwaGljcy9TcGFjZXNoaXAuanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8iLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBTUEFDRS5TcGFjZXNoaXAgZXh0ZW5kcyBUSFJFRS5Hcm91cFxuXG4gIHN0YXRlOiBudWxsXG5cbiAgIyBTVEFURVNcbiAgQElETEU6ICAgICAnSURMRSdcbiAgQExBVU5DSEVEOiAnTEFVTkNIRUQnXG4gIEBJTl9MT09QOiAgJ0lOX0xPT1AnXG4gIEBBUlJJVkVEOiAgJ0FSUklWRUQnXG5cbiAgY29uc3RydWN0b3I6ICh0YXJnZXQsIHJhZGl1cyktPlxuICAgIHN1cGVyXG5cbiAgICBAdGFyZ2V0ID0gdGFyZ2V0XG4gICAgQHJhZGl1cyA9IHJhZGl1c1xuICAgIEBhbmdsZSAgPSBNYXRoLnJhbmRvbSgpICogTWF0aC5QSSAqIDJcblxuICAgIEBzZXRTdGF0ZShTUEFDRS5TcGFjZXNoaXAuSURMRSlcblxuICAgIEBnZW5lcmF0ZSgpXG5cbiAgY29tcHV0ZVBvc2l0aW9uOiAocG9pbnQsIGFuZ2xlLCBsZW5ndGgpLT5cbiAgICB4ID0gcG9pbnQueCArIE1hdGguc2luKGFuZ2xlKSAqIGxlbmd0aFxuICAgIHkgPSBwb2ludC55ICsgTWF0aC5jb3MoYW5nbGUpICogbGVuZ3RoXG4gICAgcmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IzKHgsIHksIHBvaW50LnopXG5cbiAgZ2VuZXJhdGU6IC0+XG5cblxuICAgIGcgPSBuZXcgVEhSRUUuR2VvbWV0cnkoKVxuICAgIGcudmVydGljZXMucHVzaChcbiAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKCAgMCwgLTUyLjUsIC0xMClcbiAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKC0xMCwgLTY3LjUsICAxMClcbiAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKC01MCwgLTQyLjUsICAxMClcbiAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKCAgMCwgIDY3LjUsICAxMClcbiAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKCs1MCwgLTQyLjUsICAxMClcbiAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKCsxMCwgLTY3LjUsICAxMClcbiAgICApXG4gICAgZy5mYWNlcy5wdXNoKFxuICAgICAgbmV3IFRIUkVFLkZhY2UzKDAsIDMsIDEpLFxuICAgICAgbmV3IFRIUkVFLkZhY2UzKDEsIDIsIDMpLFxuICAgICAgbmV3IFRIUkVFLkZhY2UzKDMsIDAsIDUpLFxuICAgICAgbmV3IFRIUkVFLkZhY2UzKDUsIDQsIDMpXG4gICAgKVxuICAgIGcuY29tcHV0ZUZhY2VOb3JtYWxzKClcblxuICAgIG0gPSBuZXcgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbCh7IGNvbG9yOiAweDAwODhmZiwgc2lkZTogVEhSRUUuRG91YmxlU2lkZSB9KVxuXG4gICAgc2hpcCA9IG5ldyBUSFJFRS5NZXNoKGcsIG0pXG4gICAgbWF0cml4ID0gbmV3IFRIUkVFLk1hdHJpeDQoKVxuICAgIG1hdHJpeC5tYWtlUm90YXRpb25YKE1hdGguUEkqLjUpXG4gICAgc2hpcC5nZW9tZXRyeS5hcHBseU1hdHJpeChtYXRyaXgpXG4gICAgbWF0cml4Lm1ha2VSb3RhdGlvblooTWF0aC5QSSlcbiAgICBzaGlwLmdlb21ldHJ5LmFwcGx5TWF0cml4KG1hdHJpeClcbiAgICBzaGlwLmNhc3RTaGFkb3cgPSB0cnVlXG4gICAgc2hpcC5yZWNlaXZlU2hhZG93ID0gdHJ1ZVxuICAgIEBhZGQoc2hpcClcblxuICAgICMgRm9sbG93IGEgc3BsaW5lXG4gICAgYFxuICAgIFRIUkVFLkN1cnZlcyA9IHt9O1xuXG5cbiAgICAgVEhSRUUuQ3VydmVzLkdyYW5ueUtub3QgPSBUSFJFRS5DdXJ2ZS5jcmVhdGUoIGZ1bmN0aW9uKCl7fSxcblxuICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICB0ID0gMiAqIE1hdGguUEkgKiB0O1xuXG4gICAgICAgICAgdmFyIHggPSAtMC4yMiAqIE1hdGguY29zKHQpIC0gMS4yOCAqIE1hdGguc2luKHQpIC0gMC40NCAqIE1hdGguY29zKDMgKiB0KSAtIDAuNzggKiBNYXRoLnNpbigzICogdCk7XG4gICAgICAgICAgdmFyIHkgPSAtMC4xICogTWF0aC5jb3MoMiAqIHQpIC0gMC4yNyAqIE1hdGguc2luKDIgKiB0KSArIDAuMzggKiBNYXRoLmNvcyg0ICogdCkgKyAwLjQ2ICogTWF0aC5zaW4oNCAqIHQpO1xuICAgICAgICAgIHZhciB6ID0gMC43ICogTWF0aC5jb3MoMyAqIHQpIC0gMC40ICogTWF0aC5zaW4oMyAqIHQpO1xuICAgICAgICAgIHJldHVybiBuZXcgVEhSRUUuVmVjdG9yMyh4LCB5LCB6KS5tdWx0aXBseVNjYWxhcigyMCk7XG4gICAgICB9XG4gICAgKTtcbiAgICBgXG4gICAgc3BsaW5lID0gbmV3IFRIUkVFLkN1cnZlcy5HcmFubnlLbm90KClcbiAgICBnID0gbmV3IFRIUkVFLlR1YmVHZW9tZXRyeShzcGxpbmUsIDIwMCwgLjI1LCAxMCwgdHJ1ZSlcblxuICAgICMgdHViZU1lc2ggPSBUSFJFRS5TY2VuZVV0aWxzLmNyZWF0ZU11bHRpTWF0ZXJpYWxPYmplY3QoIGcsIFtcbiAgICAjICAgbmV3IFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWwoe1xuICAgICMgICAgIGNvbG9yOiAweDAwRkY4OFxuICAgICMgICB9KSxcbiAgICAjICAgbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtcbiAgICAjICAgICBjb2xvcjogMHgwMDAwMDAsXG4gICAgIyAgICAgb3BhY2l0eTogMC4zLFxuICAgICMgICAgIHdpcmVmcmFtZTogdHJ1ZSxcbiAgICAjICAgICB0cmFuc3BhcmVudDogdHJ1ZVxuICAgICMgfSldKVxuICAgICMgdHViZU1lc2guc2NhbGUuc2V0KCAxMCwgMTAsIDEwIClcbiAgICAjIEBhZGQodHViZU1lc2gpXG5cbiAgICBzaGlwLnNjYWxlLnNldCguNSwgLjUsIC41KVxuXG4gICAgc2hpcC51cGRhdGUgPSA9PlxuICAgICAgdGltZSA9IERhdGUubm93KClcbiAgICAgIGxvb3B0aW1lID0gMjAgKiAxMDAwXG4gICAgICB0ID0gKCB0aW1lICUgbG9vcHRpbWUgKSAvIGxvb3B0aW1lXG5cbiAgICAgIHBvcyA9IGcucGFyYW1ldGVycy5wYXRoLmdldFBvaW50QXQoIHQgKVxuICAgICAgcG9zLm11bHRpcGx5U2NhbGFyKCAxMCApXG4gICAgICBzaGlwLnBvc2l0aW9uLnNldChwb3MueCwgcG9zLnksIHBvcy56KVxuICAgICAgcG9zLm11bHRpcGx5U2NhbGFyKCAyIClcblxuICAgICAgcG9zID0gZy5wYXJhbWV0ZXJzLnBhdGguZ2V0UG9pbnRBdCggKCB0ICsgMTAgLyBnLnBhcmFtZXRlcnMucGF0aC5nZXRMZW5ndGgoKSApICUgMSApLm11bHRpcGx5U2NhbGFyKCAxMCApXG4gICAgICBzaGlwLmxvb2tBdChwb3MpXG5cbiAgICAjICMjIFR1cm4gYXJvdW5kIDNEICh+bmVlZCBpbXByb3ZlbWVudClcbiAgICAjIEBwb3NpdGlvbi5zZXQoMjUwLCAwLCAwKVxuXG4gICAgIyBwb2ludCA9IEB0YXJnZXRcbiAgICAjIG9yYml0ID0gQHBvc2l0aW9uXG4gICAgIyBkaXN0YW5jZSA9IG9yYml0LmRpc3RhbmNlVG8ocG9pbnQpXG5cbiAgICAjIHRpbWUgPSAwXG4gICAgIyBzaGlwLnVwZGF0ZSA9IChkZWx0YSk9PlxuICAgICMgICB0aW1lICs9IGRlbHRhXG4gICAgIyAgIEBwb3NpdGlvbi54ID0gZGlzdGFuY2UgKiBNYXRoLmNvcyh0aW1lICogLjAwMSlcbiAgICAjICAgQHBvc2l0aW9uLnogPSBkaXN0YW5jZSAqIE1hdGguc2luKHRpbWUgKiAuMDAxKVxuICAgICMgICBAcG9zaXRpb24ueSA9IGRpc3RhbmNlICogTWF0aC5jb3ModGltZSAqIC4wMDEpXG5cbiAgICAjICMjIFR1cm4gYXJvdW5kICh+bmVlZCBpbXByb3ZlbWVudClcbiAgICAjICMgc2hpcC5yb3RhdGlvbi5zZXQoTWF0aC5QSSouNSwgTWF0aC5QSSwgTWF0aC5QSSouNSlcbiAgICAjIEBwb3NpdGlvbi5zZXQoMjUwLCAwLCAyNTApXG5cbiAgICAjIHBvaW50ID0gbmV3IFRIUkVFLlZlY3RvcjIoQHRhcmdldC54LCBAdGFyZ2V0LnopXG4gICAgIyBvcmJpdCA9IG5ldyBUSFJFRS5WZWN0b3IyKEBwb3NpdGlvbi54LCBAcG9zaXRpb24ueilcbiAgICAjIGRpc3RhbmNlID0gb3JiaXQuZGlzdGFuY2VUbyhwb2ludClcblxuICAgICMgdGltZSA9IDBcbiAgICAjIHNoaXAudXBkYXRlID0gKGRlbHRhKT0+XG4gICAgIyAgIHRpbWUgKz0gZGVsdGFcbiAgICAjICAgYW5nbGUgPSB0aW1lICogLjAwMVxuICAgICMgICBwICAgPSBuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAwKVxuICAgICMgICBwLnggPSBkaXN0YW5jZSAqIE1hdGguY29zKGFuZ2xlKVxuICAgICMgICBwLnkgPSBkaXN0YW5jZSAqIE1hdGguc2luKGFuZ2xlKVxuICAgICMgICBwLnogPSBAcG9zaXRpb24uelxuXG4gICAgIyAgIEBwb3NpdGlvbi5zZXQocC54LCAwLCBwLnkpXG4gICAgIyAgIEBsb29rQXQoQHRhcmdldClcblxuICAgICMjIE1vdmUgdG8gYSBkaXJlY3Rpb25cblxuICAgICMgc3BlZWQgPVxuICAgICMgICB4OiBNYXRoLnJhbmRvbSgpICogMC4wNVxuICAgICMgICB5OiAwLjAxXG4gICAgIyAgIHo6IE1hdGgucmFuZG9tKCkgKiAwLjA1XG5cbiAgICAjIEBwb3NpdGlvbi5zZXQoMjUwLCAtMTAwLCAyNTApXG5cbiAgICAjIHJheSA9IG5ldyBUSFJFRS5SYXkoQHRhcmdldC5jbG9uZSgpLCBAcG9zaXRpb24uY2xvbmUoKSlcbiAgICAjIHRpbWUgICAgID0gMFxuXG4gICAgIyBzaGlwLnVwZGF0ZSA9IChkZWx0YSk9PlxuICAgICMgICAjIHNoaXAucm90YXRpb24ueSArID0gc3BlZWQueVxuICAgICMgICB0aW1lICs9IGRlbHRhXG4gICAgIyAgIHQgPSB0aW1lIC8gKDUqMTAwMClcbiAgICAjICAgdGQgPSAxIC0gdFxuICAgICMgICByZXR1cm4gaWYgdCA+PSAxXG5cbiAgICAjICAgcCA9IHJheS5hdCh0ZClcbiAgICAjICAgQHBvc2l0aW9uLnNldChwLngsIHAueSwgcC56KVxuXG4gIHNldFN0YXRlOiAoc3RhdGUpLT5cbiAgICBAc3RhdGUgPSBzdGF0ZVxuICAgIHN3aXRjaCBzdGF0ZVxuICAgICAgd2hlbiBTUEFDRS5TcGFjZXNoaXAuSURMRVxuICAgICAgICBTUEFDRS5MT0coJ0lETEUnKVxuICAgICAgd2hlbiBTUEFDRS5TcGFjZXNoaXAuTEFVTkNIRURcbiAgICAgICAgU1BBQ0UuTE9HKCdMQVVOQ0hFRCcpXG4gICAgICB3aGVuIFNQQUNFLlNwYWNlc2hpcC5JTl9MT09QXG4gICAgICAgIFNQQUNFLkxPRygnSU5fTE9PUCcpXG4gICAgICB3aGVuIFNQQUNFLlNwYWNlc2hpcC5BUlJJVkVEXG4gICAgICAgIFNQQUNFLkxPRygnQVJSSVZFRCcpXG4gICAgICBlbHNlXG4gICAgICAgIEBzZXRTdGF0ZShTUEFDRS5TcGFjZXNoaXAuSURMRSlcblxuICBmb3J3YXJkOiAtPlxuXG4gIGJhY2t3YXJkOiAtPlxuXG4gIG1vdmU6IC0+XG5cbiAgdXBkYXRlOiAtPlxuXG4gIF91cGRhdGVJbkxvb3A6IC0+XG5cbiAgX3VwZGF0ZUluTGF1bmNoZWQ6IC0+XG4iXX0=