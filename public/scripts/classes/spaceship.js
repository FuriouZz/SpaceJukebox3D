var __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

SPACE.Spaceship = (function(_super) {
  __extends(Spaceship, _super);

  Spaceship.prototype.isIncoming = false;

  Spaceship.prototype.isLoop = false;

  Spaceship.prototype.target = null;

  Spaceship.prototype.radius = 0;

  Spaceship.prototype.currentDistance = 0;

  Spaceship.prototype.distance = 0;

  Spaceship.prototype.angle = 0;

  Spaceship.prototype.time = 0;

  Spaceship.prototype.state = null;

  function Spaceship(target, radius) {
    Spaceship.__super__.constructor.apply(this, arguments);
    this.target = new PIXI.Point(target.x, target.y);
    this.radius = radius;
    this.currentDistance = Math.max(window.innerWidth, window.innerHeight);
    this.angle = Math.random() * PIXI.PI_2;
    target = HELPERS.retina(this.target);
    this.position.x = target.x + Math.cos(this.angle) * HELPERS.retina(this.currentDistance);
    this.position.y = target.y + Math.sin(this.angle) * HELPERS.retina(this.currentDistance);
    this.setState(SPACESHIP.IDLE);
    this.draw();
  }

  Spaceship.prototype.setState = function(state) {
    this.state = state;
    switch (state) {
      case SPACESHIP.IDLE:
        this.isIncoming = false;
        return this.isLoop = false;
      case SPACESHIP.LAUNCHED:
        this.isIncoming = true;
        return this.isLoop = false;
      case SPACESHIP.IN_LOOP:
        this.isIncoming = false;
        this.isLoop = true;
        this.distance = HELPERS.distance(this.position, HELPERS.retina(this.target));
        this.currentDistance = this.distance;
        return this.duration = this.time;
      case SPACESHIP.ARRIVED:
        this.isIncoming = false;
        this.isLoop = false;
        return console.log('arrived');
      default:
        return this.setState(SPACESHIP.IDLE);
    }
  };

  Spaceship.prototype.forward = function(angle, speed) {
    return this.move(angle + Math.PI, speed);
  };

  Spaceship.prototype.backward = function(angle, speed) {
    return this.move(angle, speed);
  };

  Spaceship.prototype.move = function(angle, speed) {
    var direction;
    direction = new PIXI.Point(0, 0);
    direction.x = Math.cos(angle) * speed;
    direction.y = Math.sin(angle) * speed;
    this.position.x += direction.x;
    this.position.y += direction.y;
    return this.rotation = angle;
  };

  Spaceship.prototype.draw = function() {
    this.beginFill(0xFFFFFF);
    this.moveTo(0, HELPERS.retina(-2.5));
    this.lineTo(0, HELPERS.retina(2.5));
    return this.lineTo(HELPERS.retina(7.5), 0);
  };

  Spaceship.prototype.update = function(delta) {
    if (this.state === SPACESHIP.LAUNCHED) {
      return this._updateLaunched();
    } else if (this.state === SPACESHIP.IN_LOOP) {
      return this._updateInLoop();
    }
  };

  Spaceship.prototype._updateLaunched = function() {
    if (HELPERS.distance(this.position, HELPERS.retina(this.target)) <= HELPERS.retina(this.radius)) {
      this.setState(SPACESHIP.IN_LOOP);
    }
    return this.forward(this.angle, 1);
  };

  Spaceship.prototype._updateInLoop = function() {
    var angle, old, pos, progression, target;
    progression = this.time / this.duration;
    progression = 1 - Math.min(progression, 1);
    this.currentDistance = this.distance * (1 - progression);
    target = HELPERS.retina(this.target);
    pos = {
      x: target.x + Math.cos(this.angle + (progression * PIXI.PI_2)) * this.currentDistance,
      y: target.y + Math.sin(this.angle + (progression * PIXI.PI_2)) * this.currentDistance
    };
    old = {
      x: this.position.x,
      y: this.position.y
    };
    this.position.x = pos.x;
    this.position.y = pos.y;
    angle = HELPERS.angleBetweenPoints(old, this.position);
    this.rotation = angle;
    if (progression >= 1) {
      return this.setState(SPACESHIP.ARRIVED);
    }
  };

  return Spaceship;

})(PIXI.Graphics);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNsYXNzZXMvc3BhY2VzaGlwLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBO2lTQUFBOztBQUFBLEtBQVcsQ0FBQztBQUVWLDhCQUFBLENBQUE7O0FBQUEsc0JBQUEsVUFBQSxHQUFZLEtBQVosQ0FBQTs7QUFBQSxzQkFDQSxNQUFBLEdBQVksS0FEWixDQUFBOztBQUFBLHNCQUdBLE1BQUEsR0FBWSxJQUhaLENBQUE7O0FBQUEsc0JBSUEsTUFBQSxHQUFZLENBSlosQ0FBQTs7QUFBQSxzQkFNQSxlQUFBLEdBQWlCLENBTmpCLENBQUE7O0FBQUEsc0JBT0EsUUFBQSxHQUFZLENBUFosQ0FBQTs7QUFBQSxzQkFRQSxLQUFBLEdBQVksQ0FSWixDQUFBOztBQUFBLHNCQVVBLElBQUEsR0FBWSxDQVZaLENBQUE7O0FBQUEsc0JBWUEsS0FBQSxHQUFZLElBWlosQ0FBQTs7QUFjYSxFQUFBLG1CQUFDLE1BQUQsRUFBUyxNQUFULEdBQUE7QUFDWCxJQUFBLDRDQUFBLFNBQUEsQ0FBQSxDQUFBO0FBQUEsSUFFQSxJQUFDLENBQUEsTUFBRCxHQUF1QixJQUFBLElBQUksQ0FBQyxLQUFMLENBQVcsTUFBTSxDQUFDLENBQWxCLEVBQXFCLE1BQU0sQ0FBQyxDQUE1QixDQUZ2QixDQUFBO0FBQUEsSUFHQSxJQUFDLENBQUEsTUFBRCxHQUFtQixNQUhuQixDQUFBO0FBQUEsSUFLQSxJQUFDLENBQUEsZUFBRCxHQUFtQixJQUFJLENBQUMsR0FBTCxDQUFTLE1BQU0sQ0FBQyxVQUFoQixFQUE0QixNQUFNLENBQUMsV0FBbkMsQ0FMbkIsQ0FBQTtBQUFBLElBTUEsSUFBQyxDQUFBLEtBQUQsR0FBbUIsSUFBSSxDQUFDLE1BQUwsQ0FBQSxDQUFBLEdBQWdCLElBQUksQ0FBQyxJQU54QyxDQUFBO0FBQUEsSUFRQSxNQUFBLEdBQWMsT0FBTyxDQUFDLE1BQVIsQ0FBZSxJQUFDLENBQUEsTUFBaEIsQ0FSZCxDQUFBO0FBQUEsSUFTQSxJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsR0FBYyxNQUFNLENBQUMsQ0FBUCxHQUFXLElBQUksQ0FBQyxHQUFMLENBQVMsSUFBQyxDQUFBLEtBQVYsQ0FBQSxHQUFtQixPQUFPLENBQUMsTUFBUixDQUFlLElBQUMsQ0FBQSxlQUFoQixDQVQ1QyxDQUFBO0FBQUEsSUFVQSxJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsR0FBYyxNQUFNLENBQUMsQ0FBUCxHQUFXLElBQUksQ0FBQyxHQUFMLENBQVMsSUFBQyxDQUFBLEtBQVYsQ0FBQSxHQUFtQixPQUFPLENBQUMsTUFBUixDQUFlLElBQUMsQ0FBQSxlQUFoQixDQVY1QyxDQUFBO0FBQUEsSUFZQSxJQUFDLENBQUEsUUFBRCxDQUFVLFNBQVMsQ0FBQyxJQUFwQixDQVpBLENBQUE7QUFBQSxJQWNBLElBQUMsQ0FBQSxJQUFELENBQUEsQ0FkQSxDQURXO0VBQUEsQ0FkYjs7QUFBQSxzQkErQkEsUUFBQSxHQUFVLFNBQUMsS0FBRCxHQUFBO0FBQ1IsSUFBQSxJQUFDLENBQUEsS0FBRCxHQUFTLEtBQVQsQ0FBQTtBQUVBLFlBQU8sS0FBUDtBQUFBLFdBQ08sU0FBUyxDQUFDLElBRGpCO0FBRUksUUFBQSxJQUFDLENBQUEsVUFBRCxHQUFjLEtBQWQsQ0FBQTtlQUNBLElBQUMsQ0FBQSxNQUFELEdBQWMsTUFIbEI7QUFBQSxXQUlPLFNBQVMsQ0FBQyxRQUpqQjtBQUtJLFFBQUEsSUFBQyxDQUFBLFVBQUQsR0FBbUIsSUFBbkIsQ0FBQTtlQUNBLElBQUMsQ0FBQSxNQUFELEdBQW1CLE1BTnZCO0FBQUEsV0FPTyxTQUFTLENBQUMsT0FQakI7QUFRSSxRQUFBLElBQUMsQ0FBQSxVQUFELEdBQW1CLEtBQW5CLENBQUE7QUFBQSxRQUNBLElBQUMsQ0FBQSxNQUFELEdBQW1CLElBRG5CLENBQUE7QUFBQSxRQUVBLElBQUMsQ0FBQSxRQUFELEdBQW1CLE9BQU8sQ0FBQyxRQUFSLENBQWlCLElBQUMsQ0FBQSxRQUFsQixFQUE0QixPQUFPLENBQUMsTUFBUixDQUFlLElBQUMsQ0FBQSxNQUFoQixDQUE1QixDQUZuQixDQUFBO0FBQUEsUUFHQSxJQUFDLENBQUEsZUFBRCxHQUFtQixJQUFDLENBQUEsUUFIcEIsQ0FBQTtlQUlBLElBQUMsQ0FBQSxRQUFELEdBQW1CLElBQUMsQ0FBQSxLQVp4QjtBQUFBLFdBYU8sU0FBUyxDQUFDLE9BYmpCO0FBY0ksUUFBQSxJQUFDLENBQUEsVUFBRCxHQUFjLEtBQWQsQ0FBQTtBQUFBLFFBQ0EsSUFBQyxDQUFBLE1BQUQsR0FBYyxLQURkLENBQUE7ZUFFQSxPQUFPLENBQUMsR0FBUixDQUFZLFNBQVosRUFoQko7QUFBQTtlQWtCSSxJQUFDLENBQUEsUUFBRCxDQUFVLFNBQVMsQ0FBQyxJQUFwQixFQWxCSjtBQUFBLEtBSFE7RUFBQSxDQS9CVixDQUFBOztBQUFBLHNCQXNEQSxPQUFBLEdBQVMsU0FBQyxLQUFELEVBQVEsS0FBUixHQUFBO1dBQ1AsSUFBQyxDQUFBLElBQUQsQ0FBTSxLQUFBLEdBQVEsSUFBSSxDQUFDLEVBQW5CLEVBQXVCLEtBQXZCLEVBRE87RUFBQSxDQXREVCxDQUFBOztBQUFBLHNCQXlEQSxRQUFBLEdBQVUsU0FBQyxLQUFELEVBQVEsS0FBUixHQUFBO1dBQ1IsSUFBQyxDQUFBLElBQUQsQ0FBTSxLQUFOLEVBQWEsS0FBYixFQURRO0VBQUEsQ0F6RFYsQ0FBQTs7QUFBQSxzQkE0REEsSUFBQSxHQUFNLFNBQUMsS0FBRCxFQUFRLEtBQVIsR0FBQTtBQUNKLFFBQUEsU0FBQTtBQUFBLElBQUEsU0FBQSxHQUFrQixJQUFBLElBQUksQ0FBQyxLQUFMLENBQVcsQ0FBWCxFQUFjLENBQWQsQ0FBbEIsQ0FBQTtBQUFBLElBQ0EsU0FBUyxDQUFDLENBQVYsR0FBYyxJQUFJLENBQUMsR0FBTCxDQUFTLEtBQVQsQ0FBQSxHQUFrQixLQURoQyxDQUFBO0FBQUEsSUFFQSxTQUFTLENBQUMsQ0FBVixHQUFjLElBQUksQ0FBQyxHQUFMLENBQVMsS0FBVCxDQUFBLEdBQWtCLEtBRmhDLENBQUE7QUFBQSxJQUlBLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBVixJQUFlLFNBQVMsQ0FBQyxDQUp6QixDQUFBO0FBQUEsSUFLQSxJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsSUFBZSxTQUFTLENBQUMsQ0FMekIsQ0FBQTtXQU9BLElBQUMsQ0FBQSxRQUFELEdBQVksTUFSUjtFQUFBLENBNUROLENBQUE7O0FBQUEsc0JBc0VBLElBQUEsR0FBTSxTQUFBLEdBQUE7QUFDSixJQUFBLElBQUMsQ0FBQSxTQUFELENBQVcsUUFBWCxDQUFBLENBQUE7QUFBQSxJQUNBLElBQUMsQ0FBQSxNQUFELENBQVEsQ0FBUixFQUFXLE9BQU8sQ0FBQyxNQUFSLENBQWUsQ0FBQSxHQUFmLENBQVgsQ0FEQSxDQUFBO0FBQUEsSUFFQSxJQUFDLENBQUEsTUFBRCxDQUFRLENBQVIsRUFBVyxPQUFPLENBQUMsTUFBUixDQUFlLEdBQWYsQ0FBWCxDQUZBLENBQUE7V0FHQSxJQUFDLENBQUEsTUFBRCxDQUFRLE9BQU8sQ0FBQyxNQUFSLENBQWUsR0FBZixDQUFSLEVBQTZCLENBQTdCLEVBSkk7RUFBQSxDQXRFTixDQUFBOztBQUFBLHNCQTRFQSxNQUFBLEdBQVEsU0FBQyxLQUFELEdBQUE7QUFDTixJQUFBLElBQUcsSUFBQyxDQUFBLEtBQUQsS0FBVSxTQUFTLENBQUMsUUFBdkI7YUFDRSxJQUFDLENBQUEsZUFBRCxDQUFBLEVBREY7S0FBQSxNQUVLLElBQUcsSUFBQyxDQUFBLEtBQUQsS0FBVSxTQUFTLENBQUMsT0FBdkI7YUFDSCxJQUFDLENBQUEsYUFBRCxDQUFBLEVBREc7S0FIQztFQUFBLENBNUVSLENBQUE7O0FBQUEsc0JBa0ZBLGVBQUEsR0FBaUIsU0FBQSxHQUFBO0FBQ2YsSUFBQSxJQUFHLE9BQU8sQ0FBQyxRQUFSLENBQWlCLElBQUMsQ0FBQSxRQUFsQixFQUE0QixPQUFPLENBQUMsTUFBUixDQUFlLElBQUMsQ0FBQSxNQUFoQixDQUE1QixDQUFBLElBQXdELE9BQU8sQ0FBQyxNQUFSLENBQWUsSUFBQyxDQUFBLE1BQWhCLENBQTNEO0FBQ0UsTUFBQSxJQUFDLENBQUEsUUFBRCxDQUFVLFNBQVMsQ0FBQyxPQUFwQixDQUFBLENBREY7S0FBQTtXQUVBLElBQUMsQ0FBQSxPQUFELENBQVMsSUFBQyxDQUFBLEtBQVYsRUFBaUIsQ0FBakIsRUFIZTtFQUFBLENBbEZqQixDQUFBOztBQUFBLHNCQXVGQSxhQUFBLEdBQWUsU0FBQSxHQUFBO0FBQ2IsUUFBQSxvQ0FBQTtBQUFBLElBQUEsV0FBQSxHQUFjLElBQUMsQ0FBQSxJQUFELEdBQVEsSUFBQyxDQUFBLFFBQXZCLENBQUE7QUFBQSxJQUNBLFdBQUEsR0FBYyxDQUFBLEdBQUksSUFBSSxDQUFDLEdBQUwsQ0FBUyxXQUFULEVBQXNCLENBQXRCLENBRGxCLENBQUE7QUFBQSxJQUdBLElBQUMsQ0FBQSxlQUFELEdBQW1CLElBQUMsQ0FBQSxRQUFELEdBQVksQ0FBQyxDQUFBLEdBQUksV0FBTCxDQUgvQixDQUFBO0FBQUEsSUFJQSxNQUFBLEdBQVMsT0FBTyxDQUFDLE1BQVIsQ0FBZSxJQUFDLENBQUEsTUFBaEIsQ0FKVCxDQUFBO0FBQUEsSUFLQSxHQUFBLEdBQ0U7QUFBQSxNQUFBLENBQUEsRUFBRyxNQUFNLENBQUMsQ0FBUCxHQUFXLElBQUksQ0FBQyxHQUFMLENBQVMsSUFBQyxDQUFBLEtBQUQsR0FBUyxDQUFDLFdBQUEsR0FBYyxJQUFJLENBQUMsSUFBcEIsQ0FBbEIsQ0FBQSxHQUE4QyxJQUFDLENBQUEsZUFBN0Q7QUFBQSxNQUNBLENBQUEsRUFBRyxNQUFNLENBQUMsQ0FBUCxHQUFXLElBQUksQ0FBQyxHQUFMLENBQVMsSUFBQyxDQUFBLEtBQUQsR0FBUyxDQUFDLFdBQUEsR0FBYyxJQUFJLENBQUMsSUFBcEIsQ0FBbEIsQ0FBQSxHQUE4QyxJQUFDLENBQUEsZUFEN0Q7S0FORixDQUFBO0FBQUEsSUFTQSxHQUFBLEdBQ0U7QUFBQSxNQUFBLENBQUEsRUFBRyxJQUFDLENBQUEsUUFBUSxDQUFDLENBQWI7QUFBQSxNQUNBLENBQUEsRUFBRyxJQUFDLENBQUEsUUFBUSxDQUFDLENBRGI7S0FWRixDQUFBO0FBQUEsSUFhQSxJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsR0FBYyxHQUFHLENBQUMsQ0FibEIsQ0FBQTtBQUFBLElBY0EsSUFBQyxDQUFBLFFBQVEsQ0FBQyxDQUFWLEdBQWMsR0FBRyxDQUFDLENBZGxCLENBQUE7QUFBQSxJQWdCQSxLQUFBLEdBQVEsT0FBTyxDQUFDLGtCQUFSLENBQTJCLEdBQTNCLEVBQWdDLElBQUMsQ0FBQSxRQUFqQyxDQWhCUixDQUFBO0FBQUEsSUFpQkEsSUFBQyxDQUFBLFFBQUQsR0FBWSxLQWpCWixDQUFBO0FBbUJBLElBQUEsSUFBZ0MsV0FBQSxJQUFlLENBQS9DO2FBQUEsSUFBQyxDQUFBLFFBQUQsQ0FBVSxTQUFTLENBQUMsT0FBcEIsRUFBQTtLQXBCYTtFQUFBLENBdkZmLENBQUE7O21CQUFBOztHQUY0QixJQUFJLENBQUMsU0FBbkMsQ0FBQSIsImZpbGUiOiJjbGFzc2VzL3NwYWNlc2hpcC5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFNQQUNFLlNwYWNlc2hpcCBleHRlbmRzIFBJWEkuR3JhcGhpY3NcblxuICBpc0luY29taW5nOiBmYWxzZVxuICBpc0xvb3A6ICAgICBmYWxzZVxuXG4gIHRhcmdldDogICAgIG51bGxcbiAgcmFkaXVzOiAgICAgMFxuXG4gIGN1cnJlbnREaXN0YW5jZTogMFxuICBkaXN0YW5jZTogICAwXG4gIGFuZ2xlOiAgICAgIDBcblxuICB0aW1lOiAgICAgICAwXG5cbiAgc3RhdGU6ICAgICAgbnVsbFxuXG4gIGNvbnN0cnVjdG9yOiAodGFyZ2V0LCByYWRpdXMpLT5cbiAgICBzdXBlclxuXG4gICAgQHRhcmdldCAgICAgICAgICA9IG5ldyBQSVhJLlBvaW50KHRhcmdldC54LCB0YXJnZXQueSlcbiAgICBAcmFkaXVzICAgICAgICAgID0gcmFkaXVzXG5cbiAgICBAY3VycmVudERpc3RhbmNlID0gTWF0aC5tYXgod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodClcbiAgICBAYW5nbGUgICAgICAgICAgID0gTWF0aC5yYW5kb20oKSAqIFBJWEkuUElfMlxuXG4gICAgdGFyZ2V0ICAgICAgPSBIRUxQRVJTLnJldGluYShAdGFyZ2V0KVxuICAgIEBwb3NpdGlvbi54ID0gdGFyZ2V0LnggKyBNYXRoLmNvcyhAYW5nbGUpICogSEVMUEVSUy5yZXRpbmEoQGN1cnJlbnREaXN0YW5jZSlcbiAgICBAcG9zaXRpb24ueSA9IHRhcmdldC55ICsgTWF0aC5zaW4oQGFuZ2xlKSAqIEhFTFBFUlMucmV0aW5hKEBjdXJyZW50RGlzdGFuY2UpXG5cbiAgICBAc2V0U3RhdGUoU1BBQ0VTSElQLklETEUpXG5cbiAgICBAZHJhdygpXG5cbiAgc2V0U3RhdGU6IChzdGF0ZSktPlxuICAgIEBzdGF0ZSA9IHN0YXRlXG5cbiAgICBzd2l0Y2ggc3RhdGVcbiAgICAgIHdoZW4gU1BBQ0VTSElQLklETEVcbiAgICAgICAgQGlzSW5jb21pbmcgPSBmYWxzZVxuICAgICAgICBAaXNMb29wICAgICA9IGZhbHNlXG4gICAgICB3aGVuIFNQQUNFU0hJUC5MQVVOQ0hFRFxuICAgICAgICBAaXNJbmNvbWluZyAgICAgID0gdHJ1ZVxuICAgICAgICBAaXNMb29wICAgICAgICAgID0gZmFsc2VcbiAgICAgIHdoZW4gU1BBQ0VTSElQLklOX0xPT1BcbiAgICAgICAgQGlzSW5jb21pbmcgICAgICA9IGZhbHNlXG4gICAgICAgIEBpc0xvb3AgICAgICAgICAgPSB0cnVlXG4gICAgICAgIEBkaXN0YW5jZSAgICAgICAgPSBIRUxQRVJTLmRpc3RhbmNlKEBwb3NpdGlvbiwgSEVMUEVSUy5yZXRpbmEoQHRhcmdldCkpXG4gICAgICAgIEBjdXJyZW50RGlzdGFuY2UgPSBAZGlzdGFuY2VcbiAgICAgICAgQGR1cmF0aW9uICAgICAgICA9IEB0aW1lXG4gICAgICB3aGVuIFNQQUNFU0hJUC5BUlJJVkVEXG4gICAgICAgIEBpc0luY29taW5nID0gZmFsc2VcbiAgICAgICAgQGlzTG9vcCAgICAgPSBmYWxzZVxuICAgICAgICBjb25zb2xlLmxvZyAnYXJyaXZlZCdcbiAgICAgIGVsc2VcbiAgICAgICAgQHNldFN0YXRlKFNQQUNFU0hJUC5JRExFKVxuXG4gIGZvcndhcmQ6IChhbmdsZSwgc3BlZWQpLT5cbiAgICBAbW92ZShhbmdsZSArIE1hdGguUEksIHNwZWVkKVxuXG4gIGJhY2t3YXJkOiAoYW5nbGUsIHNwZWVkKS0+XG4gICAgQG1vdmUoYW5nbGUsIHNwZWVkKVxuXG4gIG1vdmU6IChhbmdsZSwgc3BlZWQpLT5cbiAgICBkaXJlY3Rpb24gICA9IG5ldyBQSVhJLlBvaW50KDAsIDApXG4gICAgZGlyZWN0aW9uLnggPSBNYXRoLmNvcyhhbmdsZSkgKiBzcGVlZFxuICAgIGRpcmVjdGlvbi55ID0gTWF0aC5zaW4oYW5nbGUpICogc3BlZWRcblxuICAgIEBwb3NpdGlvbi54ICs9IGRpcmVjdGlvbi54XG4gICAgQHBvc2l0aW9uLnkgKz0gZGlyZWN0aW9uLnlcblxuICAgIEByb3RhdGlvbiA9IGFuZ2xlXG5cbiAgZHJhdzogLT5cbiAgICBAYmVnaW5GaWxsKDB4RkZGRkZGKVxuICAgIEBtb3ZlVG8oMCwgSEVMUEVSUy5yZXRpbmEoLTIuNSkpXG4gICAgQGxpbmVUbygwLCBIRUxQRVJTLnJldGluYSgyLjUpKVxuICAgIEBsaW5lVG8oSEVMUEVSUy5yZXRpbmEoNy41KSwgMClcblxuICB1cGRhdGU6IChkZWx0YSktPlxuICAgIGlmIEBzdGF0ZSA9PSBTUEFDRVNISVAuTEFVTkNIRURcbiAgICAgIEBfdXBkYXRlTGF1bmNoZWQoKVxuICAgIGVsc2UgaWYgQHN0YXRlID09IFNQQUNFU0hJUC5JTl9MT09QXG4gICAgICBAX3VwZGF0ZUluTG9vcCgpXG5cbiAgX3VwZGF0ZUxhdW5jaGVkOiAtPlxuICAgIGlmIEhFTFBFUlMuZGlzdGFuY2UoQHBvc2l0aW9uLCBIRUxQRVJTLnJldGluYShAdGFyZ2V0KSkgPD0gSEVMUEVSUy5yZXRpbmEoQHJhZGl1cylcbiAgICAgIEBzZXRTdGF0ZShTUEFDRVNISVAuSU5fTE9PUClcbiAgICBAZm9yd2FyZChAYW5nbGUsIDEpXG5cbiAgX3VwZGF0ZUluTG9vcDogLT5cbiAgICBwcm9ncmVzc2lvbiA9IEB0aW1lIC8gQGR1cmF0aW9uXG4gICAgcHJvZ3Jlc3Npb24gPSAxIC0gTWF0aC5taW4ocHJvZ3Jlc3Npb24sIDEpXG5cbiAgICBAY3VycmVudERpc3RhbmNlID0gQGRpc3RhbmNlICogKDEgLSBwcm9ncmVzc2lvbilcbiAgICB0YXJnZXQgPSBIRUxQRVJTLnJldGluYShAdGFyZ2V0KVxuICAgIHBvcyA9XG4gICAgICB4OiB0YXJnZXQueCArIE1hdGguY29zKEBhbmdsZSArIChwcm9ncmVzc2lvbiAqIFBJWEkuUElfMikpKiBAY3VycmVudERpc3RhbmNlXG4gICAgICB5OiB0YXJnZXQueSArIE1hdGguc2luKEBhbmdsZSArIChwcm9ncmVzc2lvbiAqIFBJWEkuUElfMikpKiBAY3VycmVudERpc3RhbmNlXG5cbiAgICBvbGQgPVxuICAgICAgeDogQHBvc2l0aW9uLnhcbiAgICAgIHk6IEBwb3NpdGlvbi55XG5cbiAgICBAcG9zaXRpb24ueCA9IHBvcy54XG4gICAgQHBvc2l0aW9uLnkgPSBwb3MueVxuXG4gICAgYW5nbGUgPSBIRUxQRVJTLmFuZ2xlQmV0d2VlblBvaW50cyhvbGQsIEBwb3NpdGlvbilcbiAgICBAcm90YXRpb24gPSBhbmdsZVxuXG4gICAgQHNldFN0YXRlKFNQQUNFU0hJUC5BUlJJVkVEKSBpZiBwcm9ncmVzc2lvbiA+PSAxXG4iXX0=