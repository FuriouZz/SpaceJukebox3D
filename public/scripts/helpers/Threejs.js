var _THREE;

_THREE = _THREE || {
  HermiteCurve: function(pts) {
    var i, path, _i, _ref;
    path = new THREE.CurvePath();
    path.add(new THREE.HermiteBezierCurve3(pts[0], pts[0], pts[1], pts[2]));
    for (i = _i = 0, _ref = pts.length - 4; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {
      path.add(new THREE.HermiteBezierCurve3(pts[i], pts[i + 1], pts[i + 2], pts[i + 3]));
    }
    path.add(new THREE.HermiteBezierCurve3(pts[pts.length - 3], pts[pts.length - 2], pts[pts.length - 1], pts[pts.length - 1]));
    return path;
  }
};

THREE.Curve.Utils.tangentHermiteBezier = function(y0, y1, y2, y3, mu, tension, bias) {
  var a0, a1, a2, a3, m0, m1, mu2, mu3;
  mu2 = mu * mu;
  mu3 = mu2 * mu;
  m0 = (y1 - y0) * (1 + bias) * (1 - tension) / 2;
  m0 += (y2 - y1) * (1 - bias) * (1 - tension) / 2;
  m1 = (y2 - y1) * (1 + bias) * (1 - tension) / 2;
  m1 += (y3 - y2) * (1 - bias) * (1 - tension) / 2;
  a0 = 2 * mu3 - 3 * mu2 + 1;
  a1 = mu3 - 2 * mu2 + mu;
  a2 = mu3 - mu2;
  a3 = -2 * mu3 + 3 * mu2;
  return a0 * y1 + a1 * m0 + a2 * m1 + a3 * y2;
};

THREE.HermiteBezierCurve3 = THREE.Curve.create(function(v0, v1, v2, v3) {
  this.v0 = v0;
  this.v1 = v1;
  this.v2 = v2;
  this.v3 = v3;
}, function(t) {
  var vector;
  vector = new THREE.Vector3();
  vector.x = THREE.Curve.Utils.tangentHermiteBezier(this.v0.x, this.v1.x, this.v2.x, this.v3.x, t, 0, 0);
  vector.y = THREE.Curve.Utils.tangentHermiteBezier(this.v0.y, this.v1.y, this.v2.y, this.v3.y, t, 0, 0);
  vector.z = THREE.Curve.Utils.tangentHermiteBezier(this.v0.z, this.v1.z, this.v2.z, this.v3.z, t, 0, 0);
  return vector;
});

THREE.IncomingCurve = THREE.Curve.create(function(v0, startAngle, maxRadius, minRadius, inverse, useGolden) {
  if (startAngle == null) {
    startAngle = 0;
  }
  if (maxRadius == null) {
    maxRadius = 100;
  }
  if (minRadius == null) {
    minRadius = 0;
  }
  if (inverse == null) {
    inverse = false;
  }
  if (useGolden == null) {
    useGolden = false;
  }
  this.v0 = v0;
  this.inverse = inverse;
  this.startAngle = startAngle;
  this.maxRadius = maxRadius;
  this.minRadius = minRadius;
  this.radius = this.maxRadius - this.minRadius;
  this.useGolden = useGolden;
}, function(t) {
  var angle, golden_angle, phi, vector;
  if (this.inverse) {
    t = 1 - t;
  }
  if (this.useGolden) {
    phi = (Math.sqrt(5) + 1) / 2 - 1;
    golden_angle = phi * Math.PI * 2;
    angle = this.startAngle + (golden_angle * t);
    angle += Math.PI * -1.235;
  } else {
    angle = this.startAngle + (Math.PI * 2 * t);
  }
  vector = new THREE.Vector3();
  vector.x = this.v0.x + Math.cos(angle) * (this.minRadius + this.radius * t);
  vector.y = this.v0.y + Math.sin(angle) * (this.minRadius + this.radius * t);
  vector.z = this.v0.z;
  return vector;
});

THREE.TestCurve = THREE.Curve.create(function(v0, v1, nbLoop) {
  if (nbLoop == null) {
    nbLoop = 2;
  }
  this.v0 = v0;
  this.v1 = v1;
  this.nbLoop = nbLoop;
}, function(t) {
  var angle, d, dist, vector;
  angle = Math.PI * 2 * t * this.nbLoop;
  d = this.v1.z - this.v0.z;
  dist = this.v1.clone().sub(this.v0);
  vector = new THREE.Vector3();
  vector.x = this.v0.x + dist.x * t;
  vector.y = this.v0.y + dist.y * t;
  vector.z = this.v0.z + dist.z * t;
  t = Math.min(t, 1 - t) / .5;
  vector.x += Math.cos(angle) * (50 * t);
  vector.y += Math.sin(angle) * (50 * t);
  return vector;
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhlbHBlcnMvVGhyZWVqcy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxNQUFBOztBQUFBLE1BQUEsR0FBUyxNQUFBLElBQVU7QUFBQSxFQUNqQixZQUFBLEVBQWMsU0FBQyxHQUFELEdBQUE7QUFDWixRQUFBLGlCQUFBO0FBQUEsSUFBQSxJQUFBLEdBQVcsSUFBQSxLQUFLLENBQUMsU0FBTixDQUFBLENBQVgsQ0FBQTtBQUFBLElBQ0EsSUFBSSxDQUFDLEdBQUwsQ0FBYSxJQUFBLEtBQUssQ0FBQyxtQkFBTixDQUEwQixHQUFJLENBQUEsQ0FBQSxDQUE5QixFQUFrQyxHQUFJLENBQUEsQ0FBQSxDQUF0QyxFQUEwQyxHQUFJLENBQUEsQ0FBQSxDQUE5QyxFQUFrRCxHQUFJLENBQUEsQ0FBQSxDQUF0RCxDQUFiLENBREEsQ0FBQTtBQUVBLFNBQVMsbUdBQVQsR0FBQTtBQUNFLE1BQUEsSUFBSSxDQUFDLEdBQUwsQ0FBYSxJQUFBLEtBQUssQ0FBQyxtQkFBTixDQUEwQixHQUFJLENBQUEsQ0FBQSxDQUE5QixFQUFrQyxHQUFJLENBQUEsQ0FBQSxHQUFFLENBQUYsQ0FBdEMsRUFBNEMsR0FBSSxDQUFBLENBQUEsR0FBRSxDQUFGLENBQWhELEVBQXNELEdBQUksQ0FBQSxDQUFBLEdBQUUsQ0FBRixDQUExRCxDQUFiLENBQUEsQ0FERjtBQUFBLEtBRkE7QUFBQSxJQUlBLElBQUksQ0FBQyxHQUFMLENBQWEsSUFBQSxLQUFLLENBQUMsbUJBQU4sQ0FBMEIsR0FBSSxDQUFBLEdBQUcsQ0FBQyxNQUFKLEdBQVcsQ0FBWCxDQUE5QixFQUE2QyxHQUFJLENBQUEsR0FBRyxDQUFDLE1BQUosR0FBVyxDQUFYLENBQWpELEVBQWdFLEdBQUksQ0FBQSxHQUFHLENBQUMsTUFBSixHQUFXLENBQVgsQ0FBcEUsRUFBbUYsR0FBSSxDQUFBLEdBQUcsQ0FBQyxNQUFKLEdBQVcsQ0FBWCxDQUF2RixDQUFiLENBSkEsQ0FBQTtBQUtBLFdBQU8sSUFBUCxD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QUMsQ0FBQSxFQUFFLENBQUMsQ0FBSixHQUFRLElBQUksQ0FBQyxDQUFMLEdBQVMsQ0FSNUIsQ0FBQTtBQUFBLEVBU0EsTUFBTSxDQUFDLENBQVAsR0FBVyxJQUFDLENBQUEsRUFBRSxDQUFDLENBQUosR0FBUSxJQUFJLENBQUMsQ0FBTCxHQUFTLENBVDVCLENBQUE7QUFBQSxFQVdBLENBQUEsR0FBSSxJQUFJLENBQUMsR0FBTCxDQUFTLENBQVQsRUFBWSxDQUFBLEdBQUksQ0FBaEIsQ0FBQSxHQUFxQixFQVh6QixDQUFBO0FBQUEsRUFhQSxNQUFNLENBQUMsQ0FBUCxJQUFZLElBQUksQ0FBQyxHQUFMLENBQVMsS0FBVCxDQUFBLEdBQWtCLENBQUMsRUFBQSxHQUFLLENBQU4sQ0FiOUIsQ0FBQTtBQUFBLEVBY0EsTUFBTSxDQUFDLENBQVAsSUFBWSxJQUFJLENBQUMsR0FBTCxDQUFTLEtBQVQsQ0FBQSxHQUFrQixDQUFDLEVBQUEsR0FBSyxDQUFOLENBZDlCLENBQUE7QUFnQkEsU0FBTyxNQUFQLENBakJBO0FBQUEsQ0FOYyxDQXhFbEIsQ0FBQSIsImZpbGUiOiJoZWxwZXJzL1RocmVlanMuanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8iLCJzb3VyY2VzQ29udGVudCI6WyJfVEhSRUUgPSBfVEhSRUUgfHwge1xuICBIZXJtaXRlQ3VydmU6IChwdHMpLT5cbiAgICBwYXRoID0gbmV3IFRIUkVFLkN1cnZlUGF0aCgpXG4gICAgcGF0aC5hZGQobmV3IFRIUkVFLkhlcm1pdGVCZXppZXJDdXJ2ZTMocHRzWzBdLCBwdHNbMF0sIHB0c1sxXSwgcHRzWzJdKSlcbiAgICBmb3IgaSBpbiBbMC4uKHB0cy5sZW5ndGgtNCldXG4gICAgICBwYXRoLmFkZChuZXcgVEhSRUUuSGVybWl0ZUJlemllckN1cnZlMyhwdHNbaV0sIHB0c1tpKzFdLCBwdHNbaSsyXSwgcHRzW2krM10pKVxuICAgIHBhdGguYWRkKG5ldyBUSFJFRS5IZXJtaXRlQmV6aWVyQ3VydmUzKHB0c1twdHMubGVuZ3RoLTNdLCBwdHNbcHRzLmxlbmd0aC0yXSwgcHRzW3B0cy5sZW5ndGgtMV0sIHB0c1twdHMubGVuZ3RoLTFdKSlcbiAgICByZXR1cm4gcGF0aFxufVxuXG5USFJFRS5DdXJ2ZS5VdGlscy50YW5nZW50SGVybWl0ZUJlemllciA9ICggeTAsIHkxLCB5MiwgeTMsIG11LCB0ZW5zaW9uLCBiaWFzICktPlxuICAgIG11MiA9IG11ICogbXVcbiAgICBtdTMgPSBtdTIgKiBtdVxuXG4gICAgbTAgID0gKHkxLXkwKSooMStiaWFzKSooMS10ZW5zaW9uKS8yXG4gICAgbTAgICs9ICh5Mi15MSkqKDEtYmlhcykqKDEtdGVuc2lvbikvMlxuXG4gICAgbTEgID0gKHkyLXkxKSooMStiaWFzKSooMS10ZW5zaW9uKS8yXG4gICAgbTEgICs9ICh5My15MikqKDEtYmlhcykqKDEtdGVuc2lvbikvMlxuXG4gICAgYTAgID0gIDIqbXUzIC0gMyptdTIgKyAxXG4gICAgYTEgID0gICAgbXUzIC0gMiptdTIgKyBtdVxuICAgIGEyICA9ICAgIG11MyAtICAgbXUyXG4gICAgYTMgID0gLTIqbXUzICsgMyptdTJcblxuICAgIHJldHVybihhMCp5MSthMSptMCthMiptMSthMyp5MilcblxuVEhSRUUuSGVybWl0ZUJlemllckN1cnZlMyA9IFRIUkVFLkN1cnZlLmNyZWF0ZShcbiAgKHYwLCB2MSwgdjIsIHYzKS0+XG4gICAgQHYwID0gdjBcbiAgICBAdjEgPSB2MVxuICAgIEB2MiA9IHYyXG4gICAgQHYzID0gdjNcbiAgICByZXR1cm5cbiAgLCAodCktPlxuICAgIHZlY3RvciA9IG5ldyBUSFJFRS5WZWN0b3IzKClcbiAgICB2ZWN0b3IueCA9IFRIUkVFLkN1cnZlLlV0aWxzLnRhbmdlbnRIZXJtaXRlQmV6aWVyKEB2MC54LCBAdjEueCwgQHYyLngsIEB2My54LCB0LCAwLCAwKVxuICAgIHZlY3Rvci55ID0gVEhSRUUuQ3VydmUuVXRpbHMudGFuZ2VudEhlcm1pdGVCZXppZXIoQHYwLnksIEB2MS55LCBAdjIueSwgQHYzLnksIHQsIDAsIDApXG4gICAgdmVjdG9yLnogPSBUSFJFRS5DdXJ2ZS5VdGlscy50YW5nZW50SGVybWl0ZUJlemllcihAdjAueiwgQHYxLnosIEB2Mi56LCBAdjMueiwgdCwgMCwgMClcbiAgICByZXR1cm4gdmVjdG9yXG4pXG5cblRIUkVFLkluY29taW5nQ3VydmUgPSBUSFJFRS5DdXJ2ZS5jcmVhdGUoXG4gICh2MCwgc3RhcnRBbmdsZT0wLCBtYXhSYWRpdXM9MTAwLCBtaW5SYWRpdXM9MCwgaW52ZXJzZT1mYWxzZSwgdXNlR29sZGVuPWZhbHNlKS0+XG4gICAgQHYwICAgICAgICAgPSB2MFxuICAgIEBpbnZlcnNlICAgID0gaW52ZXJzZVxuICAgIEBzdGFydEFuZ2xlID0gc3RhcnRBbmdsZVxuXG4gICAgQG1heFJhZGl1cyAgPSBtYXhSYWRpdXNcbiAgICBAbWluUmFkaXVzICA9IG1pblJhZGl1c1xuICAgIEByYWRpdXMgICAgID0gQG1heFJhZGl1cyAtIEBtaW5SYWRpdXNcblxuICAgIEB1c2VHb2xkZW4gID0gdXNlR29sZGVuXG5cbiAgICByZXR1cm5cbiAgLCAodCktPlxuICAgIHQgICAgID0gMSAtIHQgaWYgQGludmVyc2VcbiAgICBpZiBAdXNlR29sZGVuXG4gICAgICAgIHBoaSAgID0gKE1hdGguc3FydCg1KSsxKS8yIC0gMVxuICAgICAgICBnb2xkZW5fYW5nbGUgPSBwaGkgKiBNYXRoLlBJICogMlxuICAgICAgICBhbmdsZSA9IEBzdGFydEFuZ2xlICsgKGdvbGRlbl9hbmdsZSAqIHQpXG4gICAgICAgIGFuZ2xlICs9IE1hdGguUEkgKiAtMS4yMzVcbiAgICBlbHNlXG4gICAgICAgIGFuZ2xlID0gQHN0YXJ0QW5nbGUgKyAoTWF0aC5QSSAqIDIgKiB0KVxuXG4gICAgdmVjdG9yID0gbmV3IFRIUkVFLlZlY3RvcjMoKVxuICAgIHZlY3Rvci54ID0gQHYwLnggKyBNYXRoLmNvcyhhbmdsZSkgKiAoQG1pblJhZGl1cyArIEByYWRpdXMgKiB0KVxuICAgIHZlY3Rvci55ID0gQHYwLnkgKyBNYXRoLnNpbihhbmdsZSkgKiAoQG1pblJhZGl1cyArIEByYWRpdXMgKiB0KVxuICAgIHZlY3Rvci56ID0gQHYwLnpcbiAgICByZXR1cm4gdmVjdG9yXG4pXG5cblRIUkVFLlRlc3RDdXJ2ZSA9IFRIUkVFLkN1cnZlLmNyZWF0ZShcbiAgKHYwLCB2MSwgbmJMb29wPTIpLT5cbiAgICBAdjAgICA9IHYwXG4gICAgQHYxICAgPSB2MVxuICAgIEBuYkxvb3AgPSBuYkxvb3BcbiAgICByZXR1cm5cbiAgLCAodCktPlxuICAgIGFuZ2xlID0gTWF0aC5QSSAqIDIgKiB0ICogQG5iTG9vcFxuXG4gICAgZCA9IEB2MS56IC0gQHYwLnpcblxuICAgIGRpc3QgPSBAdjEuY2xvbmUoKS5zdWIoQHYwKVxuXG4gICAgdmVjdG9yID0gbmV3IFRIUkVFLlZlY3RvcjMoKVxuICAgIHZlY3Rvci54ID0gQHYwLnggKyBkaXN0LnggKiB0XG4gICAgdmVjdG9yLnkgPSBAdjAueSArIGRpc3QueSAqIHRcbiAgICB2ZWN0b3IueiA9IEB2MC56ICsgZGlzdC56ICogdFxuXG4gICAgdCA9IE1hdGgubWluKHQsIDEgLSB0KSAvIC41XG5cbiAgICB2ZWN0b3IueCArPSBNYXRoLmNvcyhhbmdsZSkgKiAoNTAgKiB0KVxuICAgIHZlY3Rvci55ICs9IE1hdGguc2luKGFuZ2xlKSAqICg1MCAqIHQpXG5cbiAgICByZXR1cm4gdmVjdG9yXG4pXG4iXX0=