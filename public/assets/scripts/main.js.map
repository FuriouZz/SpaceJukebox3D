{"version":3,"names":[],"mappings":"","sources":["main.js"],"sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nwindow.SPACE = window.SPACE || {};\n\nSPACE.DEFAULT = {};\n\nrequire('./../environments/default/Setup');\n\nrequire('./../environments/default/Cover');\n\n\n\n},{\"./../environments/default/Cover\":8,\"./../environments/default/Setup\":9}],2:[function(require,module,exports){\nwindow.SPACE = window.SPACE || {};\n\nrequire('./../config');\n\nrequire('./../events');\n\nrequire('./../enums');\n\nrequire('./../helpers/Helpers');\n\nrequire('./../helpers/Coffee');\n\nrequire('./../helpers/Maths');\n\nrequire('./../helpers/Threejs');\n\nrequire('./../helpers/Easing');\n\nrequire('./../engine/Scene');\n\nrequire('./../engine/Manager');\n\nrequire('./../scenes/Main');\n\nrequire('./../sounds/Soundcloud');\n\nrequire('./../sounds/SearchEngine');\n\nrequire('./../sounds/Jukebox');\n\nrequire('./../sounds/Track');\n\nrequire('./../sounds/WebAudioAPI');\n\nrequire('./../graphics/Equalizer');\n\nrequire('./../graphics/Spaceship');\n\nrequire('./../app');\n\n\n\n},{\"./../app\":3,\"./../config\":4,\"./../engine/Manager\":5,\"./../engine/Scene\":6,\"./../enums\":7,\"./../events\":10,\"./../graphics/Equalizer\":11,\"./../graphics/Spaceship\":12,\"./../helpers/Coffee\":13,\"./../helpers/Easing\":14,\"./../helpers/Helpers\":15,\"./../helpers/Maths\":16,\"./../helpers/Threejs\":17,\"./../scenes/Main\":18,\"./../sounds/Jukebox\":19,\"./../sounds/SearchEngine\":20,\"./../sounds/Soundcloud\":21,\"./../sounds/Track\":22,\"./../sounds/WebAudioAPI\":23}],3:[function(require,module,exports){\nvar manager;\n\nmanager = new SPACE.SceneManager();\n\nmanager.createScene('main', SPACE.MainScene);\n\nmanager.goToScene('main');\n\n\n\n},{}],4:[function(require,module,exports){\nSPACE.ENV = 'development';\n\nSPACE.FPS = 30;\n\nSPACE.pixelRatio = window.devicePixelRatio || 1;\n\nSPACE.THREE = {};\n\nSPACE.SOUNDCLOUD = (function() {\n  var object;\n  object = {};\n  if (SPACE.ENV === 'development') {\n    object.id = 'de0b8539b4ad2f6cc23dfe1cc6e0438d';\n  } else {\n    object.id = '807d28575c384e62a58be5c3a1446e68';\n  }\n  object.redirect_uri = window.location.origin;\n  return object;\n})();\n\nSPACE.LOG = function(log, styles) {\n  var date, dateStr, timeStr;\n  if (styles == null) {\n    styles = '';\n  }\n  if (!/(prod|production)/.test(SPACE.ENV)) {\n    date = new Date();\n    timeStr = date.toTimeString();\n    timeStr = timeStr.substr(0, 8);\n    dateStr = date.getDate() + '/';\n    dateStr += (date.getMonth() + 1) + '/';\n    dateStr += date.getFullYear();\n    return console.log(dateStr + ' - ' + timeStr + ' | ' + log, styles);\n  }\n};\n\nSPACE.TODO = function(message) {\n  return SPACE.LOG('%cTODO | ' + message, 'color: #0088FF');\n};\n\nSPACE.ASSERT = function(condition, action) {\n  if (condition) {\n    action();\n  }\n  return condition;\n};\n\n\n\n},{}],5:[function(require,module,exports){\nvar bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\nSPACE.SceneManager = (function() {\n  SceneManager.prototype.currentScene = null;\n\n  SceneManager.prototype._scenes = null;\n\n  SceneManager.prototype._stats = null;\n\n  SceneManager.prototype._clock = null;\n\n  SceneManager.prototype._tick = 0;\n\n  SceneManager.prototype.renderer = null;\n\n  SceneManager.prototype.camera = null;\n\n  function SceneManager(width, height) {\n    this._update = bind(this._update, this);\n    this._render = bind(this._render, this);\n    if (this.renderer) {\n      return this;\n    }\n    this._clock = new THREE.Clock();\n    this._scenes = [];\n    this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n    this.camera.position.setZ(600);\n    this.renderer = new THREE.WebGLRenderer({\n      antialias: true,\n      alpha: false\n    });\n    this.renderer.setSize(window.innerWidth, window.innerHeight);\n    document.getElementById('wrapper').appendChild(this.renderer.domElement);\n    if (SPACE.ENV === 'development') {\n      this._setupStats();\n    }\n    this._render();\n    this._update();\n    window.onresize = (function(_this) {\n      return function() {\n        _this.renderer.setSize(window.innerWidth, window.innerHeight);\n        _this.camera.aspect = window.innerWidth / window.innerHeight;\n        return _this.camera.updateProjectionMatrix();\n      };\n    })(this);\n  }\n\n  SceneManager.prototype._setupStats = function() {\n    this._stats = new Stats();\n    this._stats.setMode(0);\n    this._stats.domElement.style.position = 'absolute';\n    this._stats.domElement.style.left = '0px';\n    this._stats.domElement.style.top = '0px';\n    return document.body.appendChild(this._stats.domElement);\n  };\n\n  SceneManager.prototype._render = function() {\n    window.requestAnimationFrame(this._render);\n    if (!this.currentScene || this.currentScene.isPaused()) {\n      return;\n    }\n    this.renderer.render(this.currentScene, this.camera);\n    if (SPACE.ENV === 'development') {\n      return this._stats.update();\n    }\n  };\n\n  SceneManager.prototype._update = function() {\n    var c;\n    setTimeout(this._update, 1000 / SPACE.FPS);\n    if (!this.currentScene || this.currentScene.isPaused()) {\n      return;\n    }\n    c = Date.now();\n    this.currentScene.update(c - this._tick);\n    return this._tick = c;\n  };\n\n  SceneManager.prototype.createScene = function(identifier, aScene, interactive) {\n    var scene;\n    if (this._scenes[identifier]) {\n      return void 0;\n    }\n    scene = new aScene();\n    this._scenes[identifier] = scene;\n    return scene;\n  };\n\n  SceneManager.prototype.goToScene = function(identifier) {\n    if (this.currentScene) {\n      $(window).off('resize', this.currentScene.resize);\n    }\n    if (this._scenes[identifier]) {\n      if (this.currentScene) {\n        this.currentScene.pause();\n      }\n      this.currentScene = this._scenes[identifier];\n      this.currentScene.resume();\n      $(window).on('resize', this.currentScene.resize);\n      return true;\n    }\n    return false;\n  };\n\n  return SceneManager;\n\n})();\n\n\n\n},{}],6:[function(require,module,exports){\nvar bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nSPACE.Scene = (function(superClass) {\n  extend(Scene, superClass);\n\n  function Scene() {\n    this.resize = bind(this.resize, this);\n    Scene.__super__.constructor.apply(this, arguments);\n    this.type = 'Scene';\n    this.fog = null;\n    this.overrideMaterial = null;\n    this.autoUpdate = true;\n  }\n\n  Scene.prototype.update = function(delta) {\n    var child, i, len, ref, results;\n    ref = this.children;\n    results = [];\n    for (i = 0, len = ref.length; i < len; i++) {\n      child = ref[i];\n      results.push(this.updateObj(child, delta));\n    }\n    return results;\n  };\n\n  Scene.prototype.updateObj = function(obj, delta) {\n    var child, i, len, ref, results;\n    if (typeof obj.update === 'function') {\n      obj.update(delta);\n    }\n    if (obj.hasOwnProperty('children') && obj.children.length > 0) {\n      ref = obj.children;\n      results = [];\n      for (i = 0, len = ref.length; i < len; i++) {\n        child = ref[i];\n        results.push(this.updateObj(child, delta));\n      }\n      return results;\n    }\n  };\n\n  Scene.prototype.resize = function() {\n    var child, i, len, ref, results;\n    ref = this.children;\n    results = [];\n    for (i = 0, len = ref.length; i < len; i++) {\n      child = ref[i];\n      results.push(this.resizeObj(child));\n    }\n    return results;\n  };\n\n  Scene.prototype.resizeObj = function(obj) {\n    var child, i, len, ref, results;\n    if (typeof obj.resize === 'function') {\n      obj.resize();\n    }\n    if (obj.hasOwnProperty('children') && obj.children.length > 0) {\n      ref = obj.children;\n      results = [];\n      for (i = 0, len = ref.length; i < len; i++) {\n        child = ref[i];\n        results.push(this.resizeObj(child));\n      }\n      return results;\n    }\n  };\n\n  Scene.prototype.resume = function() {\n    return this.paused = false;\n  };\n\n  Scene.prototype.pause = function() {\n    return this.paused = true;\n  };\n\n  Scene.prototype.isPaused = function() {\n    return this.paused;\n  };\n\n  return Scene;\n\n})(THREE.Scene);\n\n\n\n},{}],7:[function(require,module,exports){\nwindow.Keyboard = {\n  ENTER: 13,\n  UP: 38,\n  DOWN: 40,\n  ESC: 27,\n  DELETE: 46\n};\n\nwindow.SpaceshipState = {\n  IDLE: 'idle',\n  LAUNCHED: 'launched',\n  IN_LOOP: 'in_loop',\n  ARRIVED: 'arrived'\n};\n\nwindow.SearchEngineState = {\n  OPENED: 'opened',\n  CLOSED: 'closed',\n  SEARCH: 'search',\n  TRACK_SELECTED: 'track_selected'\n};\n\nwindow.JukeboxState = {\n  IS_PLAYING: 'is_playing',\n  IS_STOPPED: 'is_stopped',\n  TRACK_STOPPED: 'track_stopped'\n};\n\nwindow.AirportState = {\n  IDLE: 'idle',\n  SENDING: 'sending'\n};\n\nObject.freeze(Keyboard);\n\nObject.freeze(SpaceshipState);\n\nObject.freeze(SearchEngineState);\n\nObject.freeze(JukeboxState);\n\nObject.freeze(AirportState);\n\n\n\n},{}],8:[function(require,module,exports){\nSPACE.DEFAULT.Cover = (function() {\n  function Cover() {\n    this._events();\n  }\n\n  Cover.prototype._events = function() {\n    return document.addEventListener(TRACK.IS_PLAYING.type, this._eTrackIsPlaying);\n  };\n\n  Cover.prototype._eTrackIsPlaying = function(e) {\n    var css, title, track, user_url, username;\n    track = e.object.track;\n    title = track.data.title;\n    username = track.data.author;\n    user_url = track.data.author_url;\n    $('#cover h1').html(title);\n    $('#cover h2').html('by <a href=\"' + user_url + '\">' + username + '</a>');\n    css = \"a { color: \" + track.data.color1 + \" !important; }\\nbody { color: \" + track.data.color2 + \" !important; }\";\n    $('.cover-style').html(css);\n    return $('#wrapper').css('background-image', 'url(resources/covers/' + track.data.cover + ')');\n  };\n\n  Cover.prototype.update = function() {};\n\n  return Cover;\n\n})();\n\n\n\n},{}],9:[function(require,module,exports){\nvar bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nSPACE.DEFAULT.Setup = (function(superClass) {\n  extend(Setup, superClass);\n\n  Setup.prototype.jukebox = null;\n\n  Setup.prototype.playlist = null;\n\n  Setup.prototype.current = null;\n\n  Setup.prototype.cover = null;\n\n  Setup.prototype.onadd = false;\n\n  function Setup() {\n    this._eJukeboxIsStopped = bind(this._eJukeboxIsStopped, this);\n    Setup.__super__.constructor.apply(this, arguments);\n    this.jukebox = SPACE.Jukebox;\n  }\n\n  Setup.prototype.onEnter = function(callback) {\n    if (callback) {\n      callback();\n    }\n    return this.setup();\n  };\n\n  Setup.prototype.onExit = function(callback) {\n    if (callback) {\n      return callback();\n    }\n  };\n\n  Setup.prototype._events = function() {\n    return document.addEventListener(JUKEBOX.IS_STOPPED.type, this._eJukeboxIsStopped);\n  };\n\n  Setup.prototype._eJukeboxIsStopped = function(e) {\n    var i, len, ref, results, track;\n    ref = this.playlist;\n    results = [];\n    for (i = 0, len = ref.length; i < len; i++) {\n      track = ref[i];\n      results.push(this.jukebox.add(track));\n    }\n    return results;\n  };\n\n  Setup.prototype.setup = function() {\n    this.fetchTracks();\n    this.cover = new SPACE.DEFAULT.Cover();\n    return this._events();\n  };\n\n  Setup.prototype.fetchTracks = function() {\n    var req;\n    req = new XMLHttpRequest();\n    req.open('GET', 'resources/playlist.json', true);\n    req.onload = (function(_this) {\n      return function(e) {\n        var i, len, ref, track;\n        _this.playlist = JSON.parse(e.target.response);\n        ref = _this.playlist;\n        for (i = 0, len = ref.length; i < len; i++) {\n          track = ref[i];\n          _this.jukebox.add(track);\n        }\n        return $('#wrapper').css('background-image', 'url(resources/covers/' + _this.playlist[0].cover + ')');\n      };\n    })(this);\n    return req.send(null);\n  };\n\n  return Setup;\n\n})(THREE.Group);\n\n\n\n},{}],10:[function(require,module,exports){\nwindow.JUKEBOX = {\n  TRACK_ON_ADD: new Event('jukebox_track_on_add'),\n  TRACK_ON_ADD_ERROR: new Event('jukebox_track_on_add_error'),\n  TRACK_ADDED: new Event('jukebox_track_added'),\n  ON_PLAY: new Event('jukebox_on_play'),\n  ON_STOP: new Event('jukebox_on_stop'),\n  IS_PLAYING: new Event('jukebox_is_playing'),\n  IS_STOPPED: new Event('jukebox_is_stopped'),\n  IS_SEARCHING: new Event('jukebox_is_searching')\n};\n\nObject.freeze(JUKEBOX);\n\nwindow.TRACK = {\n  IS_PLAYING: new Event('track_is_playing'),\n  IS_PAUSED: new Event('track_is_paused'),\n  IS_STOPPED: new Event('track_is_stopped')\n};\n\nObject.freeze(TRACK);\n\n\n\n},{}],11:[function(require,module,exports){\nvar bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nSPACE.Equalizer = (function(superClass) {\n  extend(Equalizer, superClass);\n\n  Equalizer.prototype.center = null;\n\n  Equalizer.prototype._values = null;\n\n  Equalizer.prototype._newValues = null;\n\n  Equalizer.prototype._time = 1;\n\n  Equalizer.prototype.material = null;\n\n  Equalizer.prototype.lines = null;\n\n  Equalizer.prototype.maxLength = 0;\n\n  Equalizer.prototype.minLength = 0;\n\n  Equalizer.prototype.radius = 0;\n\n  Equalizer.prototype.interpolationTime = 0;\n\n  Equalizer.prototype.color = 0xFFFFFF;\n\n  Equalizer.prototype.lineForceUp = .5;\n\n  Equalizer.prototype.lineForceDown = .5;\n\n  Equalizer.prototype.linewidth = 0;\n\n  Equalizer.prototype.absolute = false;\n\n  Equalizer.prototype.nbValues = 0;\n\n  Equalizer.prototype.maxNbValues = 512;\n\n  Equalizer.prototype.mirror = true;\n\n  function Equalizer(opts) {\n    var defaults;\n    if (opts == null) {\n      opts = {};\n    }\n    this.random = bind(this.random, this);\n    this.updateValues = bind(this.updateValues, this);\n    this._eTrackIsStopped = bind(this._eTrackIsStopped, this);\n    Equalizer.__super__.constructor.apply(this, arguments);\n    defaults = {\n      maxLength: 200,\n      minLength: 50,\n      radius: 250,\n      interpolationTime: 150,\n      color: 0xFFFFFF,\n      lineForceUp: .5,\n      lineForceDown: .5,\n      absolute: false,\n      nbValues: 256,\n      mirror: true,\n      linewidth: 2\n    };\n    opts = _Coffee.merge(defaults, opts);\n    this.minLength = opts.minLength;\n    this.maxLength = opts.maxLength;\n    this.radius = opts.radius;\n    this.interpolationTime = opts.interpolationTime;\n    this.color = opts.color;\n    this.lineForceUp = opts.lineForceUp;\n    this.lineForceDown = opts.lineForceDown;\n    this.absolute = opts.absolute;\n    this.nbValues = opts.nbValues;\n    this.mirror = opts.mirror;\n    this.linewidth = opts.linewidth;\n    this.center = new THREE.Vector3();\n    this._values = this.mute(false);\n    this._newValues = this.mute(false);\n    this.generate();\n    this._events();\n    this.updateValues();\n  }\n\n  Equalizer.prototype._events = function() {\n    return document.addEventListener(TRACK.IS_STOPPED.type, this._eTrackIsStopped);\n  };\n\n  Equalizer.prototype._eTrackIsStopped = function() {\n    return this.mute();\n  };\n\n  Equalizer.prototype.setNbValues = function(nbValues) {\n    this.nbValues = nbValues;\n    return this.mute();\n  };\n\n  Equalizer.prototype.setValues = function(values) {\n    var datas, i, j, k, len, length, newValues, ref, value;\n    if (this.mirror) {\n      datas = Array(this.nbValues);\n      for (i = j = 0, ref = (this.nbValues * .5) - 1; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {\n        datas[i] = datas[this.nbValues - 1 - i] = values[i];\n      }\n      values = datas;\n    }\n    newValues = this.mute(false);\n    for (i = k = 0, len = values.length; k < len; i = ++k) {\n      value = values[i];\n      if (this.absolute) {\n        value = Math.abs(value);\n      }\n      if (typeof value === 'undefined') {\n        value = 0;\n      }\n      length = this.minLength + parseFloat(value) * (this.maxLength - this.minLength);\n      newValues[i] = Math.max(length, 0);\n    }\n    this._newValues = newValues;\n    return this.resetInterpolation();\n  };\n\n  Equalizer.prototype.generate = function() {\n    this.mute();\n    this.material = new THREE.LineBasicMaterial({\n      color: this.color,\n      linewidth: this.linewidth\n    });\n    this.lines = [];\n    this.update(0);\n    return this.updateGeometries(true);\n  };\n\n  Equalizer.prototype.update = function(delta) {\n    var diff, i, j, ref, t;\n    this._time += delta;\n    t = this._time / this.interpolationTime;\n    if (t > 1) {\n      return;\n    }\n    for (i = j = 0, ref = this.maxNbValues - 1; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {\n      diff = this._values[i] - this._newValues[i];\n      this._values[i] = this._values[i] - t * diff;\n    }\n    return this.updateGeometries();\n  };\n\n  Equalizer.prototype.updateValues = function() {\n    if (SPACE.Jukebox.state === JukeboxState.IS_PLAYING && SPACE.Jukebox.waveformData.mono) {\n      this.setValues(SPACE.Jukebox.waveformData.mono);\n    }\n    return setTimeout(this.updateValues, this.interpolationTime * .5);\n  };\n\n  Equalizer.prototype.updateGeometries = function(create) {\n    var angle, from, geometry, i, j, len, length, line, ref, results, to;\n    if (create == null) {\n      create = false;\n    }\n    ref = this._values;\n    results = [];\n    for (i = j = 0, len = ref.length; j < len; i = ++j) {\n      length = ref[i];\n      angle = Math.PI * 2 * i / this.nbValues;\n      from = this.computePosition(this.center, angle, this.radius - length * this.lineForceDown);\n      to = this.computePosition(this.center, angle, this.radius + length * this.lineForceUp);\n      if (typeof this.lines[i] === 'undefined') {\n        geometry = new THREE.Geometry();\n        geometry.vertices.push(from, to, from);\n        line = new THREE.Line(geometry, this.material);\n        this.lines.push(line);\n        results.push(this.add(line));\n      } else {\n        line = this.lines[i];\n        line.geometry.vertices[0] = from;\n        line.geometry.vertices[1] = to;\n        line.geometry.vertices[2] = from;\n        results.push(line.geometry.verticesNeedUpdate = true);\n      }\n    }\n    return results;\n  };\n\n  Equalizer.prototype.random = function(setValues) {\n    var i, j, ref, values;\n    if (setValues == null) {\n      setValues = true;\n    }\n    values = [];\n    for (i = j = 0, ref = this.maxNbValues - 1; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {\n      values[i] = Math.random();\n    }\n    if (setValues) {\n      this.setValues(values);\n    }\n    return values;\n  };\n\n  Equalizer.prototype.mute = function(setValues) {\n    var i, j, ref, values;\n    if (setValues == null) {\n      setValues = true;\n    }\n    values = [];\n    for (i = j = 0, ref = this.maxNbValues - 1; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {\n      values[i] = 0;\n    }\n    if (setValues) {\n      this.setValues(values);\n    }\n    return values;\n  };\n\n  Equalizer.prototype.resetInterpolation = function() {\n    return this._time = 0;\n  };\n\n  Equalizer.prototype.computePosition = function(point, angle, length) {\n    var x, y;\n    x = point.x + Math.sin(angle) * length;\n    y = point.y + Math.cos(angle) * length;\n    return new THREE.Vector3(x, y, point.z);\n  };\n\n  Equalizer.prototype.removeLineFromParent = function(index) {\n    var parent;\n    parent = this.lines[index];\n    return parent.remove(this.lines[index]);\n  };\n\n  return Equalizer;\n\n})(THREE.Group);\n\n\n\n},{}],12:[function(require,module,exports){\nvar extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nSPACE.Spaceship = (function(superClass) {\n  extend(Spaceship, superClass);\n\n  Spaceship.prototype.time = 0;\n\n  Spaceship.prototype.ship = null;\n\n  Spaceship.prototype.path = null;\n\n  Spaceship.prototype.duration = 0;\n\n  Spaceship.prototype.songDuration = 0;\n\n  Spaceship.prototype.state = null;\n\n  Spaceship.prototype.angle = 0;\n\n  Spaceship.prototype._cached = null;\n\n  Spaceship.IDLE = 'IDLE';\n\n  Spaceship.LAUNCHED = 'LAUNCHED';\n\n  Spaceship.IN_LOOP = 'IN_LOOP';\n\n  Spaceship.ARRIVED = 'ARRIVED';\n\n  function Spaceship(target, radius) {\n    Spaceship.__super__.constructor.apply(this, arguments);\n    this.target = new THREE.Vector3(target.x, target.y, 5);\n    this.radius = radius;\n    this.angle = Math.random() * Math.PI * 2;\n    this.setState(SpaceshipState.IDLE);\n    this.setup();\n  }\n\n  Spaceship.prototype.setRadius = function(radius) {\n    this.radius = radius;\n    return this._cached = this._computePaths();\n  };\n\n  Spaceship.prototype.setup = function() {\n    var g, matrix, v;\n    g = new THREE.Geometry();\n    g.vertices.push(new THREE.Vector3(0, -52.5, -10), new THREE.Vector3(-10, -67.5, 10), new THREE.Vector3(-50, -42.5, 10), new THREE.Vector3(0, 67.5, 10), new THREE.Vector3(+50, -42.5, 10), new THREE.Vector3(+10, -67.5, 10));\n    g.faces.push(new THREE.Face3(0, 3, 1), new THREE.Face3(1, 2, 3), new THREE.Face3(3, 0, 5), new THREE.Face3(5, 4, 3));\n    g.computeFaceNormals();\n    matrix = new THREE.Matrix4();\n    matrix.makeRotationX(Math.PI * .5);\n    g.applyMatrix(matrix);\n    matrix.makeRotationZ(Math.PI);\n    g.applyMatrix(matrix);\n    this.ship = THREE.SceneUtils.createMultiMaterialObject(g, [\n      new THREE.MeshLambertMaterial({\n        color: 0xFFFFFF,\n        side: THREE.DoubleSide\n      })\n    ]);\n    this.ship.castShadow = true;\n    this.ship.receiveShadow = true;\n    this.ship.scale.set(.15, .15, .15);\n    this.add(this.ship);\n    this._cached = this._computePaths();\n    v = this._cached.launchedPath.getPointAt(0);\n    return this.ship.position.set(v.x, v.y, v.z);\n  };\n\n  Spaceship.prototype.setState = function(state) {\n    var v;\n    this.state = state;\n    switch (state) {\n      case SpaceshipState.IDLE:\n        return this.path = null;\n      case SpaceshipState.LAUNCHED:\n        this._resetTime();\n        this.path = this._cached.launchedPath;\n        this.duration = 10 * 1000;\n        v = this.path.getPoint(0);\n        return this.ship.position.set(v.x, v.y, v.z);\n      case SpaceshipState.IN_LOOP:\n        this._resetTime();\n        this.path = this.testnewloop();\n        this.duration = 5 * 1000;\n        v = this.path.getPoint(0);\n        return this.ship.position.set(v.x, v.y, v.z);\n      case SpaceshipState.ARRIVED:\n        this.path = null;\n        return this.parent.remove(this);\n      default:\n        return this.setState(SpaceshipState.IDLE);\n    }\n  };\n\n  Spaceship.prototype.update = function(delta) {\n    var t;\n    if (this.state !== SpaceshipState.IDLE && this.state !== SpaceshipState.ARRIVED) {\n      t = Math.min(this.time / this.duration, 1);\n      if (t >= 1) {\n        this._resetTime();\n        if (this.state === SpaceshipState.LAUNCHED) {\n          this.setState(SpaceshipState.IN_LOOP);\n        } else if (this.state === SpaceshipState.IN_LOOP) {\n          this.path = this.testnewloop();\n          this.duration = (5 + (Math.random() * 10)) * 1000;\n        }\n        return;\n      }\n      if (this.state === SpaceshipState.LAUNCHED) {\n        this.time += delta;\n        t = _Easing.QuadraticEaseOut(t);\n      }\n      if (this.state === SpaceshipState.IN_LOOP) {\n        this.time += delta;\n      }\n      if (t) {\n        return this._progress(t);\n      }\n    }\n  };\n\n  Spaceship.prototype._resetTime = function() {\n    return this.time = 0;\n  };\n\n  Spaceship.prototype._progress = function(t) {\n    var ahead, scale, v;\n    v = this.path.getPointAt(t);\n    this.ship.position.set(v.x, v.y, v.z);\n    ahead = Math.min(t + 10 / this.path.getLength(), 1);\n    v = this.path.getPointAt(ahead).multiplyScalar(1);\n    this.ship.lookAt(v);\n    if (this.state === SpaceshipState.LAUNCHED) {\n      scale = .25 + (1 - t) * .35;\n      return this.ship.scale.set(scale, scale, scale);\n    }\n  };\n\n  Spaceship.prototype._computePaths = function() {\n    var angle, curve, curveA, curveB, curvePoint, distance, fromA, i, j, len, mid, path, points, pt, ref, ref1, toA;\n    fromA = new THREE.Vector3();\n    fromA.x = this.target.x + Math.cos(this.angle) * 500;\n    fromA.y = this.target.y + Math.sin(this.angle) * 500;\n    fromA.z = 600;\n    path = new THREE.InLoopCurve(this.target, this.angle, this.radius);\n    path.inverse = true;\n    path.useGolden = true;\n    mid = path.getPoint(0);\n    ref = path.getPoint(.025);\n    angle = _Math.angleBetweenPoints(mid, ref) + Math.PI;\n    distance = mid.distanceTo(ref);\n    curvePoint = new THREE.Vector3();\n    curvePoint.x = mid.x + Math.cos(angle) * distance;\n    curvePoint.y = mid.y + Math.sin(angle) * distance;\n    curvePoint.z = mid.z;\n    toA = path.getPoint(0);\n    curve = new THREE.LaunchedCurve(fromA, toA);\n    points = curve.getPoints(10);\n    ref1 = path.getPoints(10);\n    for (i = j = 0, len = ref1.length; j < len; i = ++j) {\n      pt = ref1[i];\n      if (i > 0) {\n        points.push(pt);\n      }\n    }\n    curveA = _THREE.HermiteCurve(points);\n    curveB = path;\n    return {\n      launchedPath: curveA,\n      inLoopPath: curveB\n    };\n  };\n\n  Spaceship.prototype.testnewloop = function() {\n    var newloop;\n    THREE.NewLoop = THREE.Curve.create(function(v0, radius, startAngle) {\n      if (radius == null) {\n        radius = 100;\n      }\n      if (startAngle == null) {\n        startAngle = 0;\n      }\n      this.v0 = v0;\n      this.radius = radius;\n      this.startAngle = startAngle;\n      this.randAngle = Math.random() * Math.PI * 2;\n      this.direction = Math.random() > .5 ? true : false;\n      this.test = Math.random();\n    }, function(t) {\n      var angle, vector;\n      if (this.direction) {\n        t = 1 - t;\n      }\n      angle = (Math.PI * 2) * t;\n      angle += this.startAngle;\n      vector = new THREE.Vector3();\n      vector.x = this.v0.x + Math.cos(angle) * this.radius;\n      vector.y = this.v0.y + Math.cos(angle + this.randAngle) * (this.radius * 2 * this.test);\n      vector.z = this.v0.z + Math.sin(angle) * this.radius;\n      return vector;\n    });\n    newloop = new THREE.NewLoop(this.target, 150, Math.PI * -.5);\n    return newloop;\n  };\n\n  Spaceship.prototype._debugPath = function(path, color) {\n    var g, tube;\n    if (color == null) {\n      color = 0xFF0000;\n    }\n    g = new THREE.TubeGeometry(path, 200, .5, 10, true);\n    tube = THREE.SceneUtils.createMultiMaterialObject(g, [\n      new THREE.MeshBasicMaterial({\n        color: color,\n        opacity: 0.3,\n        wireframe: true,\n        transparent: true\n      }), new THREE.MeshLambertMaterial({\n        color: 0xFF88FF,\n        side: THREE.DoubleSide\n      })\n    ]);\n    return this.add(tube);\n  };\n\n  return Spaceship;\n\n})(THREE.Group);\n\n\n\n},{}],13:[function(require,module,exports){\nwindow._Coffee = window._Coffee || {\n  shuffle: function(array) {\n    tmp;\n    var curr, rand, tmp;\n    curr = array.length;\n    while (0 !== curr) {\n      rand = Math.floor(Math.random() * curr);\n      curr -= 1;\n      tmp = array[curr];\n      array[curr] = array[rand];\n      array[rand] = tmp;\n    }\n    return array;\n  },\n  merge: function(options, overrides) {\n    return this.extend(this.extend({}, options), overrides);\n  },\n  extend: function(object, properties) {\n    var key, val;\n    for (key in properties) {\n      val = properties[key];\n      object[key] = val;\n    }\n    return object;\n  }\n};\n\n\n\n},{}],14:[function(require,module,exports){\nwindow._Easing = window._Easing || {\n  linear: function(p) {\n    return p;\n  },\n  QuadraticEaseIn: function(p) {\n    return p * p;\n  },\n  QuadraticEaseOut: function(p) {\n    return -(p * (p - 2));\n  },\n  QuadraticEaseInOut: function(p) {\n    if (p < 0.5) {\n      return 2 * p * p;\n    } else {\n      return (-2 * p * p) + (4 * p) - 1;\n    }\n  },\n  CubicEaseIn: function(p) {\n    return p * p * p;\n  },\n  CubicEaseOut: function(p) {\n    var f;\n    f = p - 1;\n    return f * f * f + 1;\n  },\n  CubicEaseInOut: function(p) {\n    var f;\n    if (p < 0.5) {\n      return 4 * p * p * p;\n    } else {\n      f = (2 * p) - 2;\n      return 0.5 * f * f * f + 1;\n    }\n  },\n  QuarticEaseIn: function(p) {\n    return p * p * p * p;\n  },\n  QuarticEaseOut: function(p) {\n    var f;\n    f = p - 1;\n    return f * f * f * (1 - p) + 1;\n  },\n  QuarticEaseInOut: function(p) {\n    var f;\n    if (p < 0.5) {\n      return 8 * p * p * p * p;\n    } else {\n      f = p - 1;\n      return -8 * f * f * f * f + 1;\n    }\n  },\n  QuinticEaseIn: function(p) {\n    return p * p * p * p * p;\n  },\n  QuinticEaseOut: function(p) {\n    var f;\n    f = p - 1;\n    return f * f * f * f * f + 1;\n  },\n  QuinticEaseInOut: function(p) {\n    var f;\n    if (p < 0.5) {\n      return 16 * p * p * p * p * p;\n    } else {\n      f = (2 * p) - 2;\n      return 0.5 * f * f * f * f * f + 1;\n    }\n  },\n  SineEaseIn: function(p) {\n    return Math.sin((p - 1) * Math.PI * 2) + 1;\n  },\n  SineEaseOut: function(p) {\n    return Math.sin(p * Math.PI * 2);\n  },\n  SineEaseInOut: function(p) {\n    return 0.5 * (1 - Math.cos(p * Math.PI));\n  },\n  CircularEaseIn: function(p) {\n    return 1 - Math.sqrt(1 - (p * p));\n  },\n  CircularEaseOut: function(p) {\n    return Math.sqrt((2 - p) * p);\n  },\n  CircularEaseInOut: function(p) {\n    if (p < 0.5) {\n      return 0.5 * (1 - Math.sqrt(1 - 4 * (p * p)));\n    } else {\n      return 0.5 * (Math.sqrt(-((2 * p) - 3) * ((2 * p) - 1)) + 1);\n    }\n  },\n  ExponentialEaseIn: function(p) {\n    if (p === 0.0) {\n      return p;\n    } else {\n      return Math.pow(2, 10 * (p - 1));\n    }\n  },\n  ExponentialEaseOut: function(p) {\n    if (p === 1.0) {\n      return p;\n    } else {\n      return 1 - Math.pow(2, -10 * p);\n    }\n  },\n  ExponentialEaseInOut: function(p) {\n    if (p === 0.0 || p === 1.0) {\n      return p;\n    }\n    if (p < 0.5) {\n      return 0.5 * Math.pow(2, (20 * p) - 10);\n    } else {\n      return -0.5 * Math.pow(2, (-20 * p) + 10) + 1;\n    }\n  },\n  ElasticEaseIn: function(p) {\n    return Math.sin(13 * Math.PI * 2 * p) * Math.pow(2, 10 * (p - 1));\n  },\n  ElasticEaseOut: function(p) {\n    return Math.sin(-13 * Math.PI * 2 * (p + 1)) * Math.pow(2, -10 * p) + 1;\n  },\n  ElasticEaseInOut: function(p) {\n    if (p < 0.5) {\n      return 0.5 * Math.sin(13 * Math.PI * 2 * (2 * p)) * Math.pow(2, 10 * ((2 * p) - 1));\n    } else {\n      return 0.5 * (Math.sin(-13 * Math.PI * 2 * ((2 * p - 1) + 1)) * Math.pow(2, -10 * (2 * p - 1)) + 2);\n    }\n  },\n  BackEaseIn: function(p) {\n    return p * p * p - p * Math.sin(p * Math.PI);\n  },\n  BackEaseOut: function(p) {\n    var f;\n    f = 1 - p;\n    return 1 - (f * f * f - f * Math.sin(f * Math.PI));\n  },\n  BackEaseInOut: function(p) {\n    var f;\n    if (p < 0.5) {\n      f = 2 * p;\n      return 0.5 * (f * f * f - f * Math.sin(f * Math.PI));\n    } else {\n      f = 1 - (2 * p - 1);\n      return 0.5 * (1 - (f * f * f - f * Math.sin(f * Math.PI))) + 0.5;\n    }\n  },\n  BounceEaseIn: function(p) {\n    return 1 - this.BounceEaseOut(1 - p);\n  },\n  BounceEaseOut: function(p) {\n    if (p < 4 / 11.0) {\n      return (121 * p * p) / 16.0;\n    } else if (p < 8 / 11.0) {\n      return (363 / 40.0 * p * p) - (99 / 10.0 * p) + 17 / 5.0;\n    } else if (p < 9 / 10.0) {\n      return (4356 / 361.0 * p * p) - (35442 / 1805.0 * p) + 16061 / 1805.0;\n    } else {\n      return (54 / 5.0 * p * p) - (513 / 25.0 * p) + 268 / 25.0;\n    }\n  },\n  BounceEaseInOut: function(p) {\n    if (p < 0.5) {\n      return 0.5 * this.BounceEaseIn(p * 2);\n    } else {\n      return 0.5 * this.BounceEaseOut(p * 2 - 1) + 0.5;\n    }\n  }\n};\n\n\n\n},{}],15:[function(require,module,exports){\nwindow._H = window._H || {\n  trigger: function(e, object) {\n    e.object = object;\n    return document.dispatchEvent(e);\n  },\n  retina: function(value) {\n    var a, array, i, key, len, o, object;\n    if (typeof value === 'object') {\n      object = value;\n      o = {};\n      for (key in object) {\n        value = object[key];\n        if (typeof value === 'number') {\n          o[key] = value * window.devicePixelRatio;\n        }\n      }\n      return this.merge(object, o);\n    } else if (typeof value === 'array') {\n      array = value;\n      a = [];\n      for (key = i = 0, len = array.length; i < len; key = ++i) {\n        value = array[key];\n        if (typeof value === 'number') {\n          a.push(value * window.devicePixelRatio);\n        } else {\n          a.push(value);\n        }\n      }\n      return a;\n    } else if (typeof value === 'number') {\n      return value * window.devicePixelRatio;\n    }\n    return false;\n  }\n};\n\n\n\n},{}],16:[function(require,module,exports){\nwindow._Math = window._Math || {\n  angleBetweenPoints: function(first, second) {\n    var height, width;\n    height = second.y - first.y;\n    width = second.x - first.x;\n    return Math.atan2(height, width);\n  },\n  distance: function(point1, point2) {\n    var d, x, y;\n    x = point1.x - point2.x;\n    y = point1.y - point2.y;\n    d = x * x + y * y;\n    return Math.sqrt(d);\n  },\n  collision: function(dot1, dot2) {\n    var dist, r1, r2;\n    r1 = dot1.radius ? dot1.radius : 0;\n    r2 = dot2.radius ? dot2.radius : 0;\n    dist = r1 + r2;\n    return this.distance(dot1.position, dot2.position) <= Math.sqrt(dist * dist);\n  },\n  map: function(value, low1, high1, low2, high2) {\n    return low2 + (high2 - low2) * (value - low1) / (high1 - low1);\n  },\n  hermite: function(y0, y1, y2, y3, mu, tension, bias) {\n    \n    var m0,m1,mu2,mu3;\n    var a0,a1,a2,a3;\n\n    mu2 = mu * mu;\n    mu3 = mu2 * mu;\n    m0  = (y1-y0)*(1+bias)*(1-tension)/2;\n    m0 += (y2-y1)*(1-bias)*(1-tension)/2;\n    m1  = (y2-y1)*(1+bias)*(1-tension)/2;\n    m1 += (y3-y2)*(1-bias)*(1-tension)/2;\n    a0 =  2*mu3 - 3*mu2 + 1;\n    a1 =    mu3 - 2*mu2 + mu;\n    a2 =    mu3 -   mu2;\n    a3 = -2*mu3 + 3*mu2;\n    ;\n    return a0 * y1 + a1 * m0 + a2 * m1 + a3 * y2;\n  }\n};\n\n\n\n},{}],17:[function(require,module,exports){\nwindow._THREE = window._THREE || {\n  HermiteCurve: function(pts) {\n    var i, j, path, ref;\n    path = new THREE.CurvePath();\n    path.add(new THREE.HermiteBezierCurve3(pts[0], pts[0], pts[1], pts[2]));\n    for (i = j = 0, ref = pts.length - 4; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {\n      path.add(new THREE.HermiteBezierCurve3(pts[i], pts[i + 1], pts[i + 2], pts[i + 3]));\n    }\n    path.add(new THREE.HermiteBezierCurve3(pts[pts.length - 3], pts[pts.length - 2], pts[pts.length - 1], pts[pts.length - 1]));\n    return path;\n  }\n};\n\nTHREE.Curve.Utils.tangentHermiteBezier = function(y0, y1, y2, y3, mu, tension, bias) {\n  var a0, a1, a2, a3, m0, m1, mu2, mu3;\n  mu2 = mu * mu;\n  mu3 = mu2 * mu;\n  m0 = (y1 - y0) * (1 + bias) * (1 - tension) / 2;\n  m0 += (y2 - y1) * (1 - bias) * (1 - tension) / 2;\n  m1 = (y2 - y1) * (1 + bias) * (1 - tension) / 2;\n  m1 += (y3 - y2) * (1 - bias) * (1 - tension) / 2;\n  a0 = 2 * mu3 - 3 * mu2 + 1;\n  a1 = mu3 - 2 * mu2 + mu;\n  a2 = mu3 - mu2;\n  a3 = -2 * mu3 + 3 * mu2;\n  return a0 * y1 + a1 * m0 + a2 * m1 + a3 * y2;\n};\n\nTHREE.HermiteBezierCurve3 = THREE.Curve.create(function(v0, v1, v2, v3) {\n  this.v0 = v0;\n  this.v1 = v1;\n  this.v2 = v2;\n  this.v3 = v3;\n}, function(t) {\n  var vector;\n  vector = new THREE.Vector3();\n  vector.x = THREE.Curve.Utils.tangentHermiteBezier(this.v0.x, this.v1.x, this.v2.x, this.v3.x, t, 0, 0);\n  vector.y = THREE.Curve.Utils.tangentHermiteBezier(this.v0.y, this.v1.y, this.v2.y, this.v3.y, t, 0, 0);\n  vector.z = THREE.Curve.Utils.tangentHermiteBezier(this.v0.z, this.v1.z, this.v2.z, this.v3.z, t, 0, 0);\n  return vector;\n});\n\nTHREE.InLoopCurve = THREE.Curve.create(function(v0, startAngle, maxRadius, minRadius, inverse, useGolden) {\n  if (startAngle == null) {\n    startAngle = 0;\n  }\n  if (maxRadius == null) {\n    maxRadius = 100;\n  }\n  if (minRadius == null) {\n    minRadius = 0;\n  }\n  if (inverse == null) {\n    inverse = false;\n  }\n  if (useGolden == null) {\n    useGolden = false;\n  }\n  this.v0 = v0;\n  this.inverse = inverse;\n  this.startAngle = startAngle;\n  this.maxRadius = maxRadius;\n  this.minRadius = minRadius;\n  this.radius = this.maxRadius - this.minRadius;\n  this.useGolden = useGolden;\n}, function(t) {\n  var angle, golden_angle, phi, vector;\n  if (this.inverse) {\n    t = 1 - t;\n  }\n  if (this.useGolden) {\n    phi = (Math.sqrt(5) + 1) / 2 - 1;\n    golden_angle = phi * Math.PI * 2;\n    angle = this.startAngle + (golden_angle * t);\n    angle += Math.PI * -1.235;\n  } else {\n    angle = this.startAngle + (Math.PI * 2 * t);\n  }\n  vector = new THREE.Vector3();\n  vector.x = this.v0.x + Math.cos(angle) * (this.minRadius + this.radius * t);\n  vector.y = this.v0.y + Math.sin(angle) * (this.minRadius + this.radius * t);\n  vector.z = this.v0.z;\n  return vector;\n});\n\nTHREE.LaunchedCurve = THREE.Curve.create(function(v0, v1, nbLoop) {\n  if (nbLoop == null) {\n    nbLoop = 2;\n  }\n  this.v0 = v0;\n  this.v1 = v1;\n  this.nbLoop = nbLoop;\n}, function(t) {\n  var angle, d, dist, vector;\n  angle = Math.PI * 2 * t * this.nbLoop;\n  d = this.v1.z - this.v0.z;\n  dist = this.v1.clone().sub(this.v0);\n  vector = new THREE.Vector3();\n  vector.x = this.v0.x + dist.x * t;\n  vector.y = this.v0.y + dist.y * t;\n  vector.z = this.v0.z + dist.z * t;\n  t = Math.min(t, 1 - t) / .5;\n  vector.x += Math.cos(angle) * (50 * t);\n  vector.y += Math.sin(angle) * (50 * t);\n  return vector;\n});\n\n\n\n},{}],18:[function(require,module,exports){\nvar bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nSPACE.MainScene = (function(superClass) {\n  extend(MainScene, superClass);\n\n  MainScene.prototype.equalizer = null;\n\n  MainScene.prototype.jukebox = null;\n\n  MainScene.prototype.loadingManager = null;\n\n  MainScene.prototype.loader = null;\n\n  function MainScene() {\n    this.setup = bind(this.setup, this);\n    var env;\n    MainScene.__super__.constructor.apply(this, arguments);\n    this._events();\n    this.setup();\n    env = new SPACE.DEFAULT.Setup();\n    env.onEnter();\n    this.add(env);\n  }\n\n  MainScene.prototype._events = function() {\n    return document.addEventListener(SPACE.SoundCloud.IS_CONNECTED.type, this.setup);\n  };\n\n  MainScene.prototype.setup = function() {\n    SPACE.Jukebox = new SPACE.Jukebox(this);\n    this.jukebox = SPACE.Jukebox;\n    return this.jukebox.whileplaying = this._whileplaying;\n  };\n\n  MainScene.prototype.update = function(delta) {\n    MainScene.__super__.update.call(this, delta);\n    if (this.jukebox) {\n      return this.jukebox.update(delta);\n    }\n  };\n\n  return MainScene;\n\n})(SPACE.Scene);\n\n\n\n},{}],19:[function(require,module,exports){\nvar bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\nSPACE.Jukebox = (function() {\n  Jukebox.prototype.SC = null;\n\n  Jukebox.prototype.current = null;\n\n  Jukebox.prototype.airport = null;\n\n  Jukebox.prototype.playlist = null;\n\n  Jukebox.prototype.searchEngine = null;\n\n  Jukebox.prototype.waveformData = null;\n\n  Jukebox.prototype.scene = null;\n\n  Jukebox.prototype.equalizer = null;\n\n  Jukebox.prototype.group = null;\n\n  Jukebox.prototype.state = null;\n\n  Jukebox.prototype.airportState = null;\n\n  Jukebox.prototype.delay = 2000;\n\n  Jukebox.prototype.time = 0;\n\n  function Jukebox(scene) {\n    this._whileplaying = bind(this._whileplaying, this);\n    this.setAirportState = bind(this.setAirportState, this);\n    this._eTrackIsStopped = bind(this._eTrackIsStopped, this);\n    this._eTrackIsPlaying = bind(this._eTrackIsPlaying, this);\n    this.scene = scene;\n    this.group = new THREE.Group();\n    this.scene.add(this.group);\n    this.waveformData = {\n      mono: null,\n      stereo: null\n    };\n    this.setAirportState(AirportState.IDLE);\n    this.eqlzr = new SPACE.Equalizer({\n      minLength: 0,\n      maxLength: 200,\n      radius: 300,\n      color: 0xFFFFFF,\n      absolute: false,\n      lineForceDown: .5,\n      lineForceUp: 1\n    });\n    this.group.add(this.eqlzr);\n    this.equalizer = new SPACE.Equalizer({\n      minLength: 0,\n      maxLength: 50,\n      radius: 300,\n      color: 0xD1D1D1,\n      absolute: false,\n      lineForceDown: .5,\n      lineForceUp: 1\n    });\n    this.group.add(this.equalizer);\n    this.SC = SPACE.SC;\n    this.airport = [];\n    this.playlist = [];\n    this._events();\n    this.setState(JukeboxState.IS_STOPPED);\n  }\n\n  Jukebox.prototype._events = function() {\n    document.addEventListener(TRACK.IS_PLAYING.type, this._eTrackIsPlaying);\n    return document.addEventListener(TRACK.IS_STOPPED.type, this._eTrackIsStopped);\n  };\n\n  Jukebox.prototype._eTrackIsPlaying = function(e) {\n    return this.setState(JukeboxState.IS_PLAYING);\n  };\n\n  Jukebox.prototype._eTrackIsStopped = function(e) {\n    if (this.playlist.length > 0) {\n      return this.setState(JukeboxState.TRACK_STOPPED);\n    } else {\n      return this.setState(JukeboxState.IS_STOPPED);\n    }\n  };\n\n  Jukebox.prototype._createTrack = function(data) {\n    var track;\n    track = new SPACE.Track(data);\n    track.pendingDuration = this._calcPending(this.playlist.length - 1);\n    this.playlist.push(track);\n    _H.trigger(JUKEBOX.TRACK_ADDED, {\n      track: track\n    });\n    return SPACE.LOG('Sound added: ' + track.data.title);\n  };\n\n  Jukebox.prototype._calcPending = function(position) {\n    var duration, i, j, len, ref, track;\n    duration = 0;\n    ref = this.playlist;\n    for (i = j = 0, len = ref.length; j < len; i = ++j) {\n      track = ref[i];\n      duration += track.data.duration;\n      if (i === position) {\n        break;\n      }\n    }\n    return duration;\n  };\n\n  Jukebox.prototype.predefinedPlaylist = function() {\n    var i, j, len, list, results, url;\n    list = [];\n    list = _Coffee.shuffle(list);\n    results = [];\n    for (i = j = 0, len = list.length; j < len; i = ++j) {\n      url = list[i];\n      results.push(this.add(list[i]));\n    }\n    return results;\n  };\n\n  Jukebox.prototype.setState = function(state) {\n    this.state = state;\n    switch (state) {\n      case JukeboxState.IS_PLAYING:\n        return this.current.whileplayingCallback = this._whileplaying;\n      default:\n        if (this.current) {\n          this.current.destruct();\n        }\n        this.current = null;\n        if (this.state === JukeboxState.IS_STOPPED) {\n          console.log('STOPPED');\n          return _H.trigger(JUKEBOX.IS_STOPPED);\n        }\n    }\n  };\n\n  Jukebox.prototype.setAirportState = function(state) {\n    var spaceship;\n    this.airportState = state;\n    switch (state) {\n      case AirportState.IDLE:\n        return SPACE.LOG('Waiting for new spaceship');\n      case AirportState.SENDING:\n        spaceship = this.airport.shift();\n        spaceship.setState(SpaceshipState.LAUNCHED);\n        return setTimeout(this.setAirportState, 60 * 1000);\n      default:\n        return this.setAirportState(AirportState.IDLE);\n    }\n  };\n\n  Jukebox.prototype.update = function(delta) {\n    if (this.current === null) {\n      this.time += delta;\n    } else {\n      this.time = 0;\n    }\n    if (this.playlist.length > 0 && this.time > this.delay) {\n      if (this.current === null) {\n        return this.next();\n      }\n    }\n  };\n\n  Jukebox.prototype.list = function() {\n    var j, len, list, ref, track;\n    list = [];\n    ref = this.playlist;\n    for (j = 0, len = ref.length; j < len; j++) {\n      track = ref[j];\n      list.push({\n        title: track.data.title,\n        pendingDuration: track.pendingDuration\n      });\n    }\n    return list;\n  };\n\n  Jukebox.prototype.add = function(soundOrPlaylist) {\n    return this._createTrack(soundOrPlaylist);\n  };\n\n  Jukebox.prototype.next = function(track) {\n    if (this.current) {\n      this.current.stop();\n    }\n    if (this.playlist.length > 0) {\n      this.current = this.playlist.shift();\n      this.current.stream();\n      return true;\n    }\n    return false;\n  };\n\n  Jukebox.prototype._whileplaying = function() {\n    if (this.current) {\n      return this.waveformData = this.current.waveformData;\n    }\n  };\n\n  return Jukebox;\n\n})();\n\n\n\n},{}],20:[function(require,module,exports){\nvar bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\nSPACE.SearchEngine = (function() {\n  SearchEngine.prototype.SC = null;\n\n  SearchEngine.prototype.jukebox = null;\n\n  SearchEngine.prototype.input = null;\n\n  SearchEngine.prototype.list = null;\n\n  SearchEngine.prototype.listContainer = null;\n\n  SearchEngine.prototype.el = null;\n\n  SearchEngine.prototype.lineHeight = 0;\n\n  SearchEngine.prototype.resultsHeight = 0;\n\n  SearchEngine.prototype.results = null;\n\n  SearchEngine.prototype.focused = null;\n\n  SearchEngine.prototype.scrollPos = 0;\n\n  SearchEngine.state = null;\n\n  function SearchEngine(jukebox) {\n    this.focus = bind(this.focus, this);\n    this._eKeypress = bind(this._eKeypress, this);\n    this._eJukeboxIsSearching = bind(this._eJukeboxIsSearching, this);\n    this.jukebox = jukebox;\n    this.SC = SPACE.SC;\n    this.el = document.querySelector('.search');\n    this.input = document.querySelector('.search form input');\n    this.list = document.querySelector('.search .list');\n    this.listContainer = document.querySelector('.search ul');\n    this.setState(SearchEngineState.CLOSED);\n    this._events();\n  }\n\n  SearchEngine.prototype._events = function() {\n    document.querySelector('.search form').addEventListener('submit', this._eJukeboxIsSearching);\n    return document.addEventListener('keyup', this._eKeypress);\n  };\n\n  SearchEngine.prototype._eJukeboxIsSearching = function(e) {\n    e.preventDefault();\n    if (this.input.value.length > 0) {\n      return this.search(this.input.value);\n    }\n  };\n\n  SearchEngine.prototype._eKeypress = function(e) {\n    switch (e.keyCode) {\n      case Keyboard.ENTER:\n        if (this.input.value.length === 0) {\n          if (this.state === SearchEngineState.CLOSED) {\n            return this.setState(SearchEngineState.OPENED);\n          } else {\n            return this.setState(SearchEngineState.CLOSED);\n          }\n        } else if (this.state === SearchEngineState.SEARCH && this.focused) {\n          return this.setState(SearchEngineState.TRACK_SELECTED);\n        } else if (this.state === SearchEngineState.TRACK_SELECTED) {\n          return this.add();\n        }\n        break;\n      case Keyboard.UP:\n        if (this.state === SearchEngineState.SEARCH) {\n          return this.up();\n        }\n        break;\n      case Keyboard.DOWN:\n        if (this.state === SearchEngineState.SEARCH) {\n          return this.down();\n        }\n        break;\n      case Keyboard.ESC:\n      case Keyboard.DELETE:\n        if (this.state === SearchEngineState.SEARCH) {\n          return this.setState(SearchEngineState.OPENED);\n        } else if (this.state === SearchEngineState.TRACK_SELECTED) {\n          return this.setState(SearchEngineState.SEARCH);\n        } else {\n          return this.setState(SearchEngineState.CLOSED);\n        }\n        break;\n      default:\n        return false;\n    }\n  };\n\n  SearchEngine.prototype.setState = function(state) {\n    this.state = state;\n    switch (this.state) {\n      case SearchEngineState.OPENED:\n        this.el.classList.remove('hidden');\n        this.el.classList.remove('search_open');\n        this.input.value = '';\n        this.input.disabled = false;\n        this.input.focus();\n        return this.reset();\n      case SearchEngineState.CLOSED:\n        return this.el.classList.add('hidden');\n      case SearchEngineState.SEARCH:\n        this.el.classList.add('search_open');\n        this.input.disabled = true;\n        this.input.blur();\n        this.lineHeight = this.listContainer.querySelector('li').offsetHeight;\n        this.resultsHeight = this.lineHeight * (this.listContainer.querySelectorAll('li').length - 1);\n        if (this.focused) {\n          this.focused.classList.remove('selected');\n        }\n        return this.el.classList.remove('item_selected');\n      case SearchEngineState.TRACK_SELECTED:\n        this.focused.classList.add('selected');\n        return this.el.classList.add('item_selected');\n    }\n  };\n\n  SearchEngine.prototype.up = function() {\n    var next;\n    next = this.scrollPos + this.lineHeight;\n    if (next <= 0) {\n      this.scrollPos = next;\n      return this.focus();\n    }\n  };\n\n  SearchEngine.prototype.down = function() {\n    var next;\n    next = this.scrollPos - this.lineHeight;\n    if (Math.abs(next) <= this.resultsHeight) {\n      this.scrollPos = next;\n      return this.focus();\n    }\n  };\n\n  SearchEngine.prototype.focus = function() {\n    var elm, pos;\n    if (this.listContainer.querySelectorAll('li').length > 1) {\n      $([this.listContainer, this.input]).css('transform', 'translate(0, ' + this.scrollPos + 'px)');\n      pos = (this.scrollPos * -1) / (this.resultsHeight / (this.listContainer.querySelectorAll('li').length - 1));\n      pos = Math.floor(pos);\n      elm = this.el.querySelector('li:nth-child(' + (pos + 1) + ')');\n      if (elm.getAttribute('data-index')) {\n        if (this.focused) {\n          this.focused.classList.remove('focused');\n        }\n        this.focused = elm;\n        return this.focused.classList.add('focused');\n      } else {\n        return this.focused = null;\n      }\n    } else {\n      return this.setState(SearchEngineState.OPENED);\n    }\n  };\n\n  SearchEngine.prototype.reset = function() {\n    this.focused = null;\n    this.scrollPos = 0;\n    $([this.listContainer, this.input]).css('transform', 'translate(0, ' + this.scrollPos + 'px)');\n    return this.listContainer.innerHTML = '';\n  };\n\n  SearchEngine.prototype.add = function() {\n    var index, track;\n    index = this.focused.getAttribute('data-index');\n    track = this.results[index];\n    if (track) {\n      this.jukebox.add(track);\n    }\n    this.focused.classList.add('added');\n    $(this.focused).css({\n      'transform': 'scale(.75) translateX(' + window.innerWidth + 'px)'\n    });\n    return setTimeout((function(_this) {\n      return function() {\n        _this.focused.remove();\n        _this.setState(SearchEngineState.SEARCH);\n        if (_this.focused.nextSibling) {\n          _this.up();\n        }\n        return _this.focus();\n      };\n    })(this), 500);\n  };\n\n  SearchEngine.prototype.search = function(value) {\n    var lastChar, path, results, string;\n    path = value.split(/\\s/)[0];\n    if (/^(track|tracks|playlist|playlists|set|sets|user|users)$/.test(path)) {\n      lastChar = path.charAt(path.length - 1);\n      value = value.replace(path + ' ', '');\n      if (lastChar !== 's') {\n        path += 's';\n      }\n      if (/sets/.test(path)) {\n        path = 'playlists';\n      }\n    } else {\n      path = 'tracks';\n    }\n    string = '[\\n  {\"kind\":\"track\",\"id\":63256906,\"created_at\":\"2012/10/13 10:47:16 +0000\",\"user_id\":788205,\"duration\":237840,\"commentable\":true,\"state\":\"finished\",\"original_content_size\":9543168,\"last_modified\":\"2014/12/22 21:01:17 +0000\",\"sharing\":\"public\",\"tag_list\":\"\",\"permalink\":\"janet-jackson-if-kaytranada\",\"streamable\":true,\"embeddable_by\":\"all\",\"downloadable\":true,\"purchase_url\":\"https://www.dropbox.com/s/yua1lj16zs44rzl/Janet%20Jackson%20-%20If%20Kaytranada%20Live%20Set%20Version.mp3\",\"label_id\":null,\"purchase_title\":\"Alternate Version DL\",\"genre\":\"Poplockin Music\",\"title\":\"Janet Jackson - If (Kaytranada Remix)\",\"description\":\"Alternate Version, for DJs, well, thats the version i use for my dj sets; https://www.dropbox.com/s/yua1lj16zs44rzl/Janet%20Jackson%20-%20If%20Kaytranada%20Live%20Set%20Version.mp3\",\"label_name\":\"\",\"release\":\"\",\"track_type\":\"remix\",\"key_signature\":\"\",\"isrc\":\"\",\"video_url\":null,\"bpm\":null,\"release_year\":null,\"release_month\":null,\"release_day\":null,\"original_format\":\"mp3\",\"license\":\"all-rights-reserved\",\"uri\":\"https://api.soundcloud.com/tracks/63256906\",\"user\":{\"id\":788205,\"kind\":\"user\",\"permalink\":\"kaytranada\",\"username\":\"KAYTRANADA\",\"last_modified\":\"2014/11/07 04:11:36 +0000\",\"uri\":\"https://api.soundcloud.com/users/788205\",\"permalink_url\":\"http://soundcloud.com/kaytranada\",\"avatar_url\":\"https://i1.sndcdn.com/avatars-000074803694-qibxt4-large.jpg\"},\"user_playback_count\":1,\"user_favorite\":true,\"permalink_url\":\"http://soundcloud.com/kaytranada/janet-jackson-if-kaytranada\",\"artwork_url\":\"https://i1.sndcdn.com/artworks-000032094597-56ts7n-large.jpg\",\"waveform_url\":\"https://w1.sndcdn.com/aqRGi4DmbCWz_m.png\",\"stream_url\":\"https://api.soundcloud.com/tracks/63256906/stream\",\"download_url\":\"https://api.soundcloud.com/tracks/63256906/download\",\"playback_count\":3331033,\"download_count\":96112,\"favoritings_count\":66653,\"comment_count\":1594,\"attachments_uri\":\"https://api.soundcloud.com/tracks/63256906/attachments\",\"policy\":\"ALLOW\"},\\n  {\"kind\":\"track\",\"id\":63256906,\"created_at\":\"2012/10/13 10:47:16 +0000\",\"user_id\":788205,\"duration\":237840,\"commentable\":true,\"state\":\"finished\",\"original_content_size\":9543168,\"last_modified\":\"2014/12/22 21:01:17 +0000\",\"sharing\":\"public\",\"tag_list\":\"\",\"permalink\":\"janet-jackson-if-kaytranada\",\"streamable\":true,\"embeddable_by\":\"all\",\"downloadable\":true,\"purchase_url\":\"https://www.dropbox.com/s/yua1lj16zs44rzl/Janet%20Jackson%20-%20If%20Kaytranada%20Live%20Set%20Version.mp3\",\"label_id\":null,\"purchase_title\":\"Alternate Version DL\",\"genre\":\"Poplockin Music\",\"title\":\"Janet Jackson - If (Kaytranada Remix)\",\"description\":\"Alternate Version, for DJs, well, thats the version i use for my dj sets; https://www.dropbox.com/s/yua1lj16zs44rzl/Janet%20Jackson%20-%20If%20Kaytranada%20Live%20Set%20Version.mp3\",\"label_name\":\"\",\"release\":\"\",\"track_type\":\"remix\",\"key_signature\":\"\",\"isrc\":\"\",\"video_url\":null,\"bpm\":null,\"release_year\":null,\"release_month\":null,\"release_day\":null,\"original_format\":\"mp3\",\"license\":\"all-rights-reserved\",\"uri\":\"https://api.soundcloud.com/tracks/63256906\",\"user\":{\"id\":788205,\"kind\":\"user\",\"permalink\":\"kaytranada\",\"username\":\"KAYTRANADA\",\"last_modified\":\"2014/11/07 04:11:36 +0000\",\"uri\":\"https://api.soundcloud.com/users/788205\",\"permalink_url\":\"http://soundcloud.com/kaytranada\",\"avatar_url\":\"https://i1.sndcdn.com/avatars-000074803694-qibxt4-large.jpg\"},\"user_playback_count\":1,\"user_favorite\":true,\"permalink_url\":\"http://soundcloud.com/kaytranada/janet-jackson-if-kaytranada\",\"artwork_url\":\"https://i1.sndcdn.com/artworks-000032094597-56ts7n-large.jpg\",\"waveform_url\":\"https://w1.sndcdn.com/aqRGi4DmbCWz_m.png\",\"stream_url\":\"https://api.soundcloud.com/tracks/63256906/stream\",\"download_url\":\"https://api.soundcloud.com/tracks/63256906/download\",\"playback_count\":3331033,\"download_count\":96112,\"favoritings_count\":66653,\"comment_count\":1594,\"attachments_uri\":\"https://api.soundcloud.com/tracks/63256906/attachments\",\"policy\":\"ALLOW\"},\\n  {\"kind\":\"track\",\"id\":63256906,\"created_at\":\"2012/10/13 10:47:16 +0000\",\"user_id\":788205,\"duration\":237840,\"commentable\":true,\"state\":\"finished\",\"original_content_size\":9543168,\"last_modified\":\"2014/12/22 21:01:17 +0000\",\"sharing\":\"public\",\"tag_list\":\"\",\"permalink\":\"janet-jackson-if-kaytranada\",\"streamable\":true,\"embeddable_by\":\"all\",\"downloadable\":true,\"purchase_url\":\"https://www.dropbox.com/s/yua1lj16zs44rzl/Janet%20Jackson%20-%20If%20Kaytranada%20Live%20Set%20Version.mp3\",\"label_id\":null,\"purchase_title\":\"Alternate Version DL\",\"genre\":\"Poplockin Music\",\"title\":\"Janet Jackson - If (Kaytranada Remix)\",\"description\":\"Alternate Version, for DJs, well, thats the version i use for my dj sets; https://www.dropbox.com/s/yua1lj16zs44rzl/Janet%20Jackson%20-%20If%20Kaytranada%20Live%20Set%20Version.mp3\",\"label_name\":\"\",\"release\":\"\",\"track_type\":\"remix\",\"key_signature\":\"\",\"isrc\":\"\",\"video_url\":null,\"bpm\":null,\"release_year\":null,\"release_month\":null,\"release_day\":null,\"original_format\":\"mp3\",\"license\":\"all-rights-reserved\",\"uri\":\"https://api.soundcloud.com/tracks/63256906\",\"user\":{\"id\":788205,\"kind\":\"user\",\"permalink\":\"kaytranada\",\"username\":\"KAYTRANADA\",\"last_modified\":\"2014/11/07 04:11:36 +0000\",\"uri\":\"https://api.soundcloud.com/users/788205\",\"permalink_url\":\"http://soundcloud.com/kaytranada\",\"avatar_url\":\"https://i1.sndcdn.com/avatars-000074803694-qibxt4-large.jpg\"},\"user_playback_count\":1,\"user_favorite\":true,\"permalink_url\":\"http://soundcloud.com/kaytranada/janet-jackson-if-kaytranada\",\"artwork_url\":\"https://i1.sndcdn.com/artworks-000032094597-56ts7n-large.jpg\",\"waveform_url\":\"https://w1.sndcdn.com/aqRGi4DmbCWz_m.png\",\"stream_url\":\"https://api.soundcloud.com/tracks/63256906/stream\",\"download_url\":\"https://api.soundcloud.com/tracks/63256906/download\",\"playback_count\":3331033,\"download_count\":96112,\"favoritings_count\":66653,\"comment_count\":1594,\"attachments_uri\":\"https://api.soundcloud.com/tracks/63256906/attachments\",\"policy\":\"ALLOW\"},\\n  {\"kind\":\"track\",\"id\":63256906,\"created_at\":\"2012/10/13 10:47:16 +0000\",\"user_id\":788205,\"duration\":237840,\"commentable\":true,\"state\":\"finished\",\"original_content_size\":9543168,\"last_modified\":\"2014/12/22 21:01:17 +0000\",\"sharing\":\"public\",\"tag_list\":\"\",\"permalink\":\"janet-jackson-if-kaytranada\",\"streamable\":true,\"embeddable_by\":\"all\",\"downloadable\":true,\"purchase_url\":\"https://www.dropbox.com/s/yua1lj16zs44rzl/Janet%20Jackson%20-%20If%20Kaytranada%20Live%20Set%20Version.mp3\",\"label_id\":null,\"purchase_title\":\"Alternate Version DL\",\"genre\":\"Poplockin Music\",\"title\":\"Janet Jackson - If (Kaytranada Remix)\",\"description\":\"Alternate Version, for DJs, well, thats the version i use for my dj sets; https://www.dropbox.com/s/yua1lj16zs44rzl/Janet%20Jackson%20-%20If%20Kaytranada%20Live%20Set%20Version.mp3\",\"label_name\":\"\",\"release\":\"\",\"track_type\":\"remix\",\"key_signature\":\"\",\"isrc\":\"\",\"video_url\":null,\"bpm\":null,\"release_year\":null,\"release_month\":null,\"release_day\":null,\"original_format\":\"mp3\",\"license\":\"all-rights-reserved\",\"uri\":\"https://api.soundcloud.com/tracks/63256906\",\"user\":{\"id\":788205,\"kind\":\"user\",\"permalink\":\"kaytranada\",\"username\":\"KAYTRANADA\",\"last_modified\":\"2014/11/07 04:11:36 +0000\",\"uri\":\"https://api.soundcloud.com/users/788205\",\"permalink_url\":\"http://soundcloud.com/kaytranada\",\"avatar_url\":\"https://i1.sndcdn.com/avatars-000074803694-qibxt4-large.jpg\"},\"user_playback_count\":1,\"user_favorite\":true,\"permalink_url\":\"http://soundcloud.com/kaytranada/janet-jackson-if-kaytranada\",\"artwork_url\":\"https://i1.sndcdn.com/artworks-000032094597-56ts7n-large.jpg\",\"waveform_url\":\"https://w1.sndcdn.com/aqRGi4DmbCWz_m.png\",\"stream_url\":\"https://api.soundcloud.com/tracks/63256906/stream\",\"download_url\":\"https://api.soundcloud.com/tracks/63256906/download\",\"playback_count\":3331033,\"download_count\":96112,\"favoritings_count\":66653,\"comment_count\":1594,\"attachments_uri\":\"https://api.soundcloud.com/tracks/63256906/attachments\",\"policy\":\"ALLOW\"}\\n]';\n    results = JSON.parse(string);\n    this.input.value = 'Looking for \"' + value + '\"';\n    return this.SC.search(value, path, (function(_this) {\n      return function(results) {\n        var artwork_url, i, j, len, li, track;\n        console.log(results);\n        if (results.length === 0) {\n          _this.input.value = '\"' + value + '\" has no result';\n          return;\n        } else {\n          _this.input.value = 'Results for \"' + value + '\"';\n        }\n        _this.results = [];\n        _this.listContainer.appendChild(document.createElement('li'));\n        for (i = j = 0, len = results.length; j < len; i = ++j) {\n          track = results[i];\n          li = document.createElement('li');\n          li.setAttribute('data-index', i);\n          artwork_url = track.artwork_url;\n          if (!artwork_url) {\n            artwork_url = 'images/no_artwork.gif';\n          }\n          li.innerHTML = \"<div>\\n  <img src=\\\"\" + artwork_url + \"\\\" alt=\\\"\\\" onerror=\\\"this.src='images/no_artwork.gif'\\\">\\n  <div>\\n    <p>\" + track.title + \"</p>\\n    <p>\" + (track.user.username.toLowerCase()) + \"</p>\\n  </div>\\n</div>\";\n          _this.results.push(track);\n          _this.listContainer.appendChild(li);\n        }\n        return _this.setState(SearchEngineState.SEARCH);\n      };\n    })(this));\n  };\n\n  return SearchEngine;\n\n})();\n\n\n\n},{}],21:[function(require,module,exports){\nvar bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\nSPACE.SoundCloud = (function() {\n  SoundCloud.prototype.client_id = null;\n\n  SoundCloud.prototype.redirect_uri = null;\n\n  SoundCloud.prototype.token = null;\n\n  SoundCloud.IS_CONNECTED = (function() {\n    return new Event('soundcloud_connected');\n  })();\n\n  function SoundCloud(id, redirect_uri) {\n    this._eClick = bind(this._eClick, this);\n    SC.initialize({\n      client_id: id,\n      redirect_uri: redirect_uri\n    });\n    this.client_id = id;\n    this.redirect_uri = redirect_uri;\n  }\n\n  SoundCloud.prototype.isConnected = function() {\n    if (document.cookie.replace(/(?:(?:^|.*;\\s*)soundcloud_connected\\s*\\=\\s*([^;]*).*$)|^.*$/, \"$1\") !== \"true\") {\n      document.querySelector('.login').classList.add('show');\n      document.querySelector('.login').addEventListener('click', this._eClick);\n    } else {\n      this.token = document.cookie.replace(/(?:(?:^|.*;\\s*)soundcloud_token\\s*\\=\\s*([^;]*).*$)|^.*$/, \"$1\");\n      return true;\n    }\n    return false;\n  };\n\n  SoundCloud.prototype._eClick = function() {\n    return SC.connect((function(_this) {\n      return function() {\n        _this.token = SC.accessToken();\n        document.cookie = \"soundcloud_token=\" + _this.token;\n        document.cookie = \"soundcloud_connected=true\";\n        document.querySelector('.login').classList.remove('show');\n        return _H.trigger(SPACE.SoundCloud.IS_CONNECTED);\n      };\n    })(this));\n  };\n\n  SoundCloud.prototype.pathOrUrl = function(path, callback) {\n    if (/^\\/(playlists|tracks|users)\\/[0-9]+$/.test(path)) {\n      return callback(path);\n    }\n    if (!/^(http|https)/.test(path)) {\n      return console.log(\"\\\"\" + path + \"\\\" is not an url or a path\");\n    }\n    return SC.get('/resolve', {\n      url: path\n    }, (function(_this) {\n      return function(track, error) {\n        var url;\n        if (error) {\n          console.log(error.message);\n          return callback(error.message, error);\n        } else {\n          url = ['', track.kind + 's', track.id].join('/');\n          return callback(url);\n        }\n      };\n    })(this));\n  };\n\n  SoundCloud.prototype.streamSound = function(object, options, callback) {\n    var defaults, path;\n    if (options == null) {\n      options = {};\n    }\n    if (object && object.hasOwnProperty('kind')) {\n      path = object.uri.replace('https://api.soundcloud.com', '');\n      defaults = {\n        autoPlay: true,\n        useWaveformData: true,\n        useHTML5audio: true,\n        preferFlash: false\n      };\n      options = _Coffee.merge(defaults, options);\n      return SC.stream(path, options, callback);\n    }\n  };\n\n  SoundCloud.prototype.getSoundOrPlaylist = function(path, callback) {\n    if (typeof path === 'object' && path.hasOwnProperty('kind')) {\n      callback(path);\n      return true;\n    }\n    return this.pathOrUrl(path, (function(_this) {\n      return function(path, error) {\n        if (error) {\n          callback(path, error);\n          return;\n        }\n        return _this.get(path, callback);\n      };\n    })(this));\n  };\n\n  SoundCloud.prototype.get = function(path, callback) {\n    return SC.get(path, callback);\n  };\n\n  SoundCloud.prototype.getSoundUrl = function(path, callback) {\n    return this.getSoundOrPlaylist(path, (function(_this) {\n      return function(sound) {\n        return callback(sound.stream_url + '?oauth_token=' + _this.token);\n      };\n    })(this));\n  };\n\n  SoundCloud.prototype.search = function(search, path, callback) {\n    if (typeof path === 'function') {\n      callback = path;\n      path = 'tracks';\n    }\n    if (path === 'users') {\n      return this.pathOrUrl('https://soundcloud.com/' + search, (function(_this) {\n        return function(path, error) {\n          if (error) {\n            callback(path, error);\n            return;\n          }\n          path = path + '/favorites?oauth_token=' + _this.token;\n          return SC.get(path, callback);\n        };\n      })(this));\n    } else {\n      path = '/' + path + '?oauth_token=' + this.token + '&q=' + search;\n      return SC.get(path, callback);\n    }\n  };\n\n  return SoundCloud;\n\n})();\n\n\n\n},{}],22:[function(require,module,exports){\nvar bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\nSPACE.Track = (function() {\n  Track.prototype.data = null;\n\n  Track.prototype.spaceship = null;\n\n  Track.prototype.sound = null;\n\n  Track.prototype.time = 0;\n\n  Track.prototype.pendingDuration = 0;\n\n  Track.prototype.isPlaying = false;\n\n  Track.prototype.whileplayingCallback = null;\n\n  function Track(data) {\n    this._whileplaying = bind(this._whileplaying, this);\n    this._onfinish = bind(this._onfinish, this);\n    this._onplay = bind(this._onplay, this);\n    this._starting = bind(this._starting, this);\n    this._eTrackIsStopped = bind(this._eTrackIsStopped, this);\n    this._eTrackIsPlaying = bind(this._eTrackIsPlaying, this);\n    this.data = data;\n    this.SC = SPACE.SC;\n    this._events();\n  }\n\n  Track.prototype._events = function() {\n    document.addEventListener(TRACK.IS_PLAYING.type, this._eTrackIsPlaying);\n    return document.addEventListener(TRACK.IS_STOPPED.type, this._eTrackIsStopped);\n  };\n\n  Track.prototype._eTrackIsPlaying = function() {\n    return this.isPlaying = true;\n  };\n\n  Track.prototype._eTrackIsStopped = function() {\n    return this.isPlaying = false;\n  };\n\n  Track.prototype.stream = function() {\n    var url;\n    url = 'resources/sounds/' + this.data.url;\n    window.WebAudioAPI = window.WebAudioAPI || new SPACE.WebAudioAPI();\n    this.api = WebAudioAPI;\n    this.api.onplay = this._onplay;\n    this.api.onaudioprocess = this._whileplaying;\n    this.api.onended = this._onfinish;\n    return this.api.setUrl(url);\n  };\n\n  Track.prototype.play = function() {\n    return this.api.play();\n  };\n\n  Track.prototype.pause = function() {\n    return this.api.pause();\n  };\n\n  Track.prototype.stop = function() {\n    this.api.stop();\n    return this._onfinish();\n  };\n\n  Track.prototype.destruct = function() {\n    document.removeEventListener(TRACK.IS_PLAYING.type, this._eTrackIsPlaying);\n    document.removeEventListener(TRACK.IS_STOPPED.type, this._eTrackIsStopped);\n    return this.api.destroy();\n  };\n\n  Track.prototype._starting = function(sound) {\n    this.sound = sound;\n    return SPACE.LOG('Next: ' + this.data.title);\n  };\n\n  Track.prototype._onplay = function() {\n    return _H.trigger(TRACK.IS_PLAYING, {\n      track: this\n    });\n  };\n\n  Track.prototype._onfinish = function() {\n    _H.trigger(TRACK.IS_STOPPED, {\n      track: this\n    });\n    return this.api.stop();\n  };\n\n  Track.prototype.datas = Array(256);\n\n  Track.prototype._whileplaying = function(e) {\n    var analyser, array, i, j;\n    analyser = this.api.analyser;\n    array = new Float32Array(analyser.fftSize);\n    analyser.getFloatTimeDomainData(array);\n    for (i = j = 0; j <= 255; i = ++j) {\n      this.datas[i] = array[i];\n    }\n    this.waveformData = {\n      mono: this.datas\n    };\n    if (this.whileplayingCallback) {\n      return this.whileplayingCallback();\n    }\n  };\n\n  return Track;\n\n})();\n\n\n\n},{}],23:[function(require,module,exports){\nvar bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\nSPACE.WebAudioAPI = (function() {\n  WebAudioAPI.prototype.identifier = 'WebAudioAPI';\n\n  WebAudioAPI.prototype.ctx = null;\n\n  WebAudioAPI.prototype.analyser = null;\n\n  WebAudioAPI.prototype.processor = null;\n\n  WebAudioAPI.prototype.buffer = null;\n\n  WebAudioAPI.prototype.src = null;\n\n  WebAudioAPI.prototype.startTime = 0;\n\n  WebAudioAPI.prototype.position = 0;\n\n  WebAudioAPI.prototype.duration = 0;\n\n  WebAudioAPI.prototype.time = 0;\n\n  WebAudioAPI.prototype.isLoaded = false;\n\n  function WebAudioAPI() {\n    this._onEnded = bind(this._onEnded, this);\n    this._onAudioProcess = bind(this._onAudioProcess, this);\n    var e;\n    try {\n      if (window.AudioContextObject === void 0) {\n        window.AudioContextObject = new (window.AudioContext || window.webkitAudioContext)();\n      }\n    } catch (_error) {\n      e = _error;\n      if (App.env === 'development') {\n        console.log(\"HTML5 Web Audio API not supported. Switch to SoundManager2.\");\n      }\n    }\n  }\n\n  WebAudioAPI.prototype.setUrl = function(url) {\n    var request;\n    this.ctx = AudioContextObject;\n    this._oldBrowser();\n    request = new XMLHttpRequest();\n    request.open('GET', url, true);\n    request.responseType = 'arraybuffer';\n    request.withCredentials = true;\n    request.onload = (function(_this) {\n      return function() {\n        return _this.ctx.decodeAudioData(request.response, function(buffer) {\n          _this.isLoaded = true;\n          _this.buffer = buffer;\n          return _this.play();\n        }, _this._onError);\n      };\n    })(this);\n    return request.send();\n  };\n\n  WebAudioAPI.prototype._onError = function() {\n    return console.log('ERROR');\n  };\n\n  WebAudioAPI.prototype.pause = function() {\n    if (this.src) {\n      this.src.stop(0);\n      this.src = null;\n      this.processor.onaudioprocess = null;\n      this.position = this.ctx.currentTime - this.startTime;\n      return this.isPlaying = false;\n    }\n  };\n\n  WebAudioAPI.prototype.play = function(position) {\n    if (!this.isLoaded) {\n      return;\n    }\n    this._connect();\n    this.position = typeof position === 'number' ? position : this.position || 0;\n    this.startTime = this.ctx.currentTime - (this.position || 0);\n    this.src.start(this.ctx.currentTime, this.position);\n    console.log(this.src);\n    this.isPlaying = true;\n    if (this.onplay) {\n      return this.onplay();\n    }\n  };\n\n  WebAudioAPI.prototype.stop = function() {\n    if (this.src) {\n      this.src.stop();\n      this.src.disconnect(0);\n      this.src = null;\n      this.processor.onaudioprocess = null;\n      this.isPlaying = false;\n      this.position = 0;\n      return this.startTime = 0;\n    }\n  };\n\n  WebAudioAPI.prototype.volume = function(volume) {\n    volume = Math.min(1, Math.max(0, volume));\n    return this.gainNode.gain.value = volume;\n  };\n\n  WebAudioAPI.prototype.updatePosition = function() {\n    if (this.isPlaying) {\n      this.position = this.ctx.currentTime - this.startTime;\n    }\n    if (this.position > this.buffer.duration) {\n      this.position = this.buffer.duration;\n      this.pause();\n    }\n    return this.position;\n  };\n\n  WebAudioAPI.prototype.seek = function(time) {\n    if (this.isPlaying) {\n      return this.play(time);\n    } else {\n      return this.position = time;\n    }\n  };\n\n  WebAudioAPI.prototype.destroy = function() {\n    this.stop();\n    this._disconnect();\n    return this.ctx = null;\n  };\n\n  WebAudioAPI.prototype._connect = function() {\n    if (this.isPlaying) {\n      this.pause();\n    }\n    this.src = this.ctx.createBufferSource();\n    this.src.buffer = this.buffer;\n    this.src.onended = this._onEnded;\n    this.duration = this.buffer.duration;\n    this.analyser = this.ctx.createAnalyser();\n    this.analyser.smoothingTimeConstant = .3;\n    this.analyser.fftSize = 512;\n    this.processor = this.ctx.createScriptProcessor(2048, 1, 1);\n    this.gainNode = this.ctx.createGain();\n    this.src.connect(this.analyser);\n    this.src.connect(this.gainNode);\n    this.analyser.connect(this.processor);\n    this.processor.connect(this.ctx.destination);\n    this.gainNode.connect(this.ctx.destination);\n    this.processor.onaudioprocess = this._onAudioProcess;\n    this.processor.api = this;\n    this._oldBrowser();\n    return this.volume(0);\n  };\n\n  WebAudioAPI.prototype._disconnect = function() {\n    if (this.analyser) {\n      this.analyser.disconnect(0);\n    }\n    if (this.processor) {\n      return this.processor.disconnect(0);\n    }\n  };\n\n  WebAudioAPI.prototype._onAudioProcess = function() {\n    if (this.onaudioprocess) {\n      return this.onaudioprocess();\n    }\n  };\n\n  WebAudioAPI.prototype._onEnded = function() {\n    this.src.disconnect(0);\n    this.src = null;\n    this.processor.onaudioprocess = null;\n    this.isPlaying = false;\n    if (this.onended) {\n      return this.onended();\n    }\n  };\n\n  WebAudioAPI.prototype._oldBrowser = function() {\n    if (this.ctx && typeof this.ctx.createScriptProcessor !== 'function') {\n      this.ctx.createScriptProcessor = this.ctx.createJavaScriptNode;\n    }\n    if (this.src && typeof this.src.start !== 'function') {\n      this.src.start = this.src.noteOn;\n    }\n    if (this.src && typeof this.src.stop !== 'function') {\n      return this.src.stop = this.src.noteOff;\n    }\n  };\n\n  return WebAudioAPI;\n\n})();\n\n\n\n},{}]},{},[1,2]);\n"],"file":"main.js","sourceRoot":"/source/"}